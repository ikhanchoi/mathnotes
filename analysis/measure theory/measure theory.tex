\documentclass{../../large}
\usepackage{../../ikhanchoi}


\begin{document}
\title{Measure Theory}
\author{Ikhan Choi}
\maketitle
\tableofcontents

\part{}





\chapter{Measures}


\section{Measures}

\begin{prb}[$\sigma$-algebras]
Let $X$ be a set.
A \emph{$\sigma$-algebra} of sets on $X$ is a collection $\cA\subset\cP(X)$ which is closed under countable unions and complements.
\begin{parts}
\item generated by a set.
\item countable and cocountable sets
\item Borel
\end{parts}
\end{prb}

\begin{prb}[Measures]
A \emph{measurable space} or a \emph{Borel space} is a pair $(X,\cA)$ of a set $X$ and a $\sigma$-algebra $\cA$ on $X$.
Each element of $\cA$ is called \emph{measurable}.
We often omit $\cA$ to just write $X$ for $(X,\cA)$ if there is no confusion.

Let $(X,\cA)$ be a measurable space.
A \emph{measure} on $(X,\cA)$ is a set function $\mu:\cA\to[0,\infty]:\varnothing\mapsto0$ that is \emph{countably additive}: we have
\[\mu\Bigl(\bigsqcup_{i=1}^\infty E_i\Bigr)=\sum_{i=1}^\infty\mu(E_i),\qquad(E_i)_{i=1}^\infty\subset\cA.\]
Here the squared cup notation reads the disjoint union.
A \emph{measure space} is a triple $(X,\cA,\mu)$, where $\mu$ is a measure on $(X,\cA)$.
Let $\mu$ be a measure on $X$.
\begin{parts}
\item $\mu$ is monotone: for $E,F\in\cA$ if $E\subset F$ then $\mu(E)\le\mu(F)$.
\item $\mu$ is countably subadditive: for
\item $\mu$ is continuous from below:
\item $\mu$ is continuous from above:
\end{parts}
\end{prb}


\begin{prb}[Complete measures]
Let $(X,\cA,\mu)$ be a measure space.
A \emph{null set} is a measurable set $N$ satisfying $\mu(N)=0$, and a \emph{full set} is a measurable set whose complement is a null set.

A \emph{complete measure} is a measure such that every subset of a null set is measurable.

For a predicate $P$ of points $x\in X$, we say $P$ is true \emph{almost everywhere} or \emph{a.e.} on $X$ if there is a full set $F\subset X$ such that $P(x)$ is true for all $x\in F$.
\end{prb}



\section{Carath\'eodory extension}

\begin{prb}[Outer measures]
Let $X$ be a set.
An \emph{outer measure} on $X$ is a set function $\mu^*:\cP(X)\to[0,\infty]:\varnothing\mapsto0$ which is monotone and countably subadditive.
\begin{enumerate}[(i)]
\item $\mu^*$ is \emph{monotone}: we have
\[S_1\subset S_2\quad\Rightarrow\quad\mu^*(S_1)\le\mu^*(S_2),\qquad S_1,S_2\in\cP(X),\]
\item $\mu^*$ is \emph{countably subadditive}: we have
\[\mu^*\Bigl(\bigcup_{i=1}^\infty S_i\Bigr)\le\sum_{i=1}^\infty\mu^*(S_i),\qquad (S_i)_{i=1}^\infty\subset\cP(X).\]
\end{enumerate}
Compairing the definition of measures, we can see the outer measures extend the domain to the power set, but loosen the countable additivity to monotone countable subadditivity.
\begin{parts}
\item A set function $\mu^*:\cP(X)\to[0,\infty]:\varnothing\mapsto0$ is an outer measure if and only if $\mu^*$ is \emph{monotonically countably subadditive}:
\[S\subset\bigcup_{i=1}^\infty S_i\quad\Rightarrow\quad\mu^*(S)\le\sum_{i=1}^\infty\mu^*(S_i),\qquad S\in\cP(X),\ (S_i)_{i=1}^\infty\subset\cP(X).\]
\item
For any $\varnothing\in\cA_0\subset\cP(X)$, let $\mu_0:\cA_0\to[0,\infty]:\varnothing\mapsto0$ be a set function.
We can associate an outer measure $\mu^*:\cP(X)\to[0,\infty]$ by defining as
\[\mu^*(S):=\inf\left\{\,\sum_{i=1}^\infty\mu_0(B_i):S\subset\bigcup_{i=1}^\infty B_i,\ B_i\in\cA_0\,\right\},\]
where we use the convention $\inf\varnothing=\infty$.
\end{parts}
\end{prb}
\begin{pf}
\end{pf}


\begin{prb}[Carath\'eodory measurable sets]
Let $\mu^*$ be an outer measure on a set $X$.
We want to construct a measure by restriction of $\mu^*$ on a properly defined $\sigma$-algebra.
A subset $E\subset X$ is called \emph{Carath\'eodory measurable} relative to $\mu^*$ if
\[\mu^*(S)=\mu^*(S\cap E)+\mu^*(S\setminus E)\]
for every $S\in\cP(X)$.
Let $\cA\subset\cP(X)$ be the collection of all Carath\'eodory measurable subsets relative to $\mu^*$.
\begin{parts}
\item $\cA$ is an algebra and $\mu^*$ is finitely additive on $\cA$.
\item $\cA$ is a $\sigma$-algebra and $\mu^*$ is countably additive on $\cA$. That is, $\mu:=\mu^*|_\cA$ is a measure.
\item The measure $\mu$ is complete.
\end{parts}
\end{prb}
\begin{pf}
\end{pf}


\begin{prb}[Carath\'eodory extension theorem]
The Carath\'eodory extension is a construction method for a measure extending a given set function $\mu_0$ on $\cA_0\subset\cP(X)$ for a set $X$.
The idea is to restrict the outer measure $\mu^*$ associated to $\mu_0$ in order to obtain a measure $\mu$.
We want to find a sufficient condition for $\mu$ to be a measure on a $\sigma$-algebra containing $\cA_0$.

Let $\varnothing\in\cA_0\subset\cP(X)$, and let $\mu_0:\cA_0\to[0,\infty]$ be a set function with $\mu_0(\varnothing)=0$.
Let $\mu^*:\cP(X)\to[0,\infty]$ be the associated outer measure of $\mu_0$, and $\mu:\cA\to[0,\infty]$ the measure defined by the restriction of $\mu^*$ on Carath\'eodory measurable subsets.
\begin{parts}
\item
$\mu^*$ extends $\mu_0$ if $\mu_0$ satisfies the monotone countable subadditivity: we have
\[A\subset\bigcup_{i=1}^\infty B_i\quad\Rightarrow\quad\mu_0(A)\le\sum_{i=1}^\infty\mu_0(B_i),\qquad A\in\cA_0,\ (B_i)_{i=1}^\infty\subset\cA_0\]
\item
$\mu$ extends $\mu_0$ if $\mu_0$ satisfies the following property in addition: for $B,A\in\cA_0$ and any $\e>0$, there are $(C_j)_{j=1}^\infty,(D_j)_{j=1}^\infty\subset\cA_0$ such that
\[B\cap A\subset\bigcup_{j=1}^\infty C_j,\quad B\setminus A\subset\bigcup_{j=1}^\infty D_j,\quad\sum_{j=1}^\infty(\mu_0(C_j)+\mu_0(D_j))<\mu_0(B)+\e.\]
\end{parts}
\end{prb}
\begin{pf}
(a)
Fix $A\in\cA_0$.
Clearly $\mu^*(A)\le\mu_0(A)$.
For the opposite direction, we may assume $\mu^*(A)<\infty$.
By the finiteness of $\mu^*(A)$, for any $\e>0$ we have $(B_i)_{i=1}^\infty\subset\cA_0$ such that $A\subset\bigcup_{i=1}^\infty B_i$ and
\[\sum_{i=1}^\infty\mu_0(B_i)<\mu^*(A)+\e.\]
Therefore we have $\mu_0(A)<\mu^*(A)+\e$ by the assumption, and we get $\mu_0(A)\le\mu^*(A)$ by limiting $\e\to0$.

(b)
Fix $A\in\cA_0$.
It is enough to check the inequality $\mu^*(S\cap A)+\mu^*(S\setminus A)\le\mu^*(S)$ for $S\in\cP(X)$ with $\mu^*(S)<\infty$.
By the finiteness of $\mu^*(S)$, we have $(B_i)_{i=1}^\infty\subset\cB$ such that $S\subset\bigcup_{i=1}^\infty B_i$.
From the condition, we have $B_i\cap A\subset\bigcup_{j=1}^\infty C_{i,j}$ and $B_i\setminus A\subset\bigcup_{j=1}^\infty D_{i,j}$ satisfying
\begin{align*}
\mu^*(S\cap A)+\mu^*(S\setminus A)
&\le\mu^*\Bigl(\bigcup_{j=1}^\infty(B_i\cap A)\Bigr)+\mu^*\Bigl(\bigcup_{j=1}^\infty(B_i\setminus A)\Bigr)\\
&\le\sum_{i,j=1}^\infty(\mu_0(C_{i,j})+\mu_0(D_{i,j}))\\
&\le\sum_{i=1}^\infty(\mu_0(B_i)+2^{-i}\e)\\
&<\mu^*(S)+\e.
\end{align*}
Therefore, $A$ is Carath\'eodory measurable relative to $\mu^*$, so the domain of $\mu$ contains the domain of $\mu_0$.
The values coincide by the part (a).
\end{pf}


\begin{prb}[Uniqueness of extension of measures]
The Carath\'eodory extension also provides a uniqueness result for measure extensions.
Let $\rho:\cB\to[0,\infty]:\varnothing\mapsto0$ be a set function, where $\varnothing\in\cB\subset\cP(X)$ for a set $X$.
We say $\rho$ is \emph{$\sigma$-finite} if there is a cover $\{B_i\}_{i=1}^\infty\subset\cB$ of $X$ such that $\rho(B_i)<\infty$ for each $i$.

Let $\cA$ be a $\sigma$-algebra containing $\cB$.
Let $\mu$ be a measure on $\cA$, which extends $\rho$, given by the restriction of the outer measure $\mu^*$ associated to $\rho$.
Let $\nu$ be another measure on $\cA$ which extends $\rho$.
Let $E\in\cA$ and $\{E_i\}_{i=1}^\infty\subset\cA$.
\begin{parts}
\item $\nu(E)\le\mu(E)$.
\item $\nu(E_i)=\mu(E_i)$ implies $\nu\Bigl(\bigcup_{i=1}^\infty E_i\Bigr)=\mu\Bigl(\bigcup_{i=1}^\infty E_i\Bigr)$.
\item $\nu(E)=\mu(E)$ for $\mu(E)<\infty$.
\item $\nu(E)=\mu(E)$ for $\mu(E)=\infty$, if $\rho$ is $\sigma$-finite
\end{parts}
\end{prb}
\begin{pf}
(a)
We may assume $\mu(E)<\infty$.
By the definition of the outer measure, there is $\{B_i\}_{i=1}^\infty\subset\cB$ such that $E\subset\bigcup_{i=1}^\infty B_i$.
Also, whenever $E\subset\bigcup_{i=1}^\infty B_i$ we have
\[\nu(E)\le\nu\Bigl(\bigcup_{i=1}^\infty B_i\Bigr)\le\sum_{i=1}^\infty\nu(B_i)=\sum_{i=1}^\infty\rho(B_i)=\sum_{i=1}^\infty\mu(B_i),\]
hence $\nu(E)\le\mu(E)$.

(b)
In the light of the inclusion-exclusion principle, we have
\[\mu(E_i\cup E_j)=\mu(E_i)+\mu(E_j)-\mu(E_i\cap E_j)\le\nu(E_i)+\nu(E_j)-\nu(E_i\cap E_j)=\nu(E_i\cup E_j),\]
so that $\mu(E_i\cup E_j)=\nu(E_i\cap E_j)$.
Applying it inductively, we have for every $n$ that
\[\mu\Bigl(\bigcup_{i=1}^nB_i\Bigr)=\nu\Bigl(\bigcup_{i=1}^nB_i\Bigr),\]
and by limiting $n\to\infty$ the continuity from below gives
\[\mu\Bigl(\bigcup_{i=1}^\infty B_i\Bigr)=\nu\Bigl(\bigcup_{i=1}^\infty B_i\Bigr).\]

(c)
Because $\mu(E)<\infty$, for any $\e>0$ we have a sequence $(B_i)_{i=1}^\infty\subset\cB$ such that $E\subset\bigcup_{i=1}^\infty B_i$ and
\[\sum_{i=1}^\infty\rho(B_i)<\mu(E)+\e.\]
Applying the part (b) 
Then, we have
\[\mu(E)\le\mu\Bigl(\bigcup_{i=1}^\infty B_i\Bigr)=\nu\Bigl(\bigcup_{i=1}^\infty B_i\Bigr)=\nu\Bigl(\bigcup_{i=1}^\infty B_i\setminus E\Bigr)+\nu(E)\]
and
\[\nu\Bigl(\bigcup_{i=1}^\infty B_i\setminus E\Bigr)
\le\mu\Bigl(\bigcup_{i=1}^\infty B_i\setminus E\Bigr)
=\mu\Bigl(\bigcup_{i=1}^\infty B_i\Bigr)-\mu(E)
\le\sum_{i=1}^\infty\mu(B_i)-\mu(E)=\sum_{i=1}^\infty\rho(B_i)-\mu(E)<\e,\]
we get $\mu(E)<\nu(E)+\e$ and $\mu(E)\le\nu(E)$ by limiting $\e\to0$.

(d)
Let $\{B_i\}_{i=1}^\infty\subset\cB$ be a cover of $X$ such that $\rho(B_i)<\infty$.
Define $E_1:=B_1$ and $E_n:=B_n\setminus\bigcup_{i=1}^{n-1}B_i$ for $n\ge2$ so that $\{E_i\}_{i=1}^\infty$ is a pairwise disjoint cover of $X$ with
\[\mu(E\cap E_i)\le\mu(E_i)\le\mu(B_i)=\rho(B_i)<\infty\]
for each $i$, so we have by the part (c) that
\[\nu(E)=\sum_{i=1}^\infty\nu(E\cap E_i)=\sum_{i=1}^\infty\mu(E\cap E_i)=\mu(E).\qedhere\]
\end{pf}



\section{Measures on the real line}


\begin{prb}[Borel $\sigma$-algebra]
\end{prb}

\begin{prb}[Distribution functions]
\end{prb}

\begin{prb}[Helly selection theorem]
\end{prb}

\begin{prb}[Vitali set]
\end{prb}




\section*{Exercises}
\begin{prb}[Boolean algebras and rings]

\end{prb}

\begin{prb}[Cardinalities]
infinite $\sigma$-algebra is $\ge\fc$.

\end{prb}

\begin{prb}[Semi-rings and semi-algebras]
We will prove a simplified Carath\'eodory extension with respect to \emph{semi-rings} and \emph{semi-algebras}.
Let $\cA\subset\cP(X)$ such that $\varnothing\in\cA$.
We say that $\cA$ is a semi-ring if it is closed under finite intersections, and each relative complement is a finite union of elements of $\cA$.
We say that $\cA$ is a semi-algebra

Let $\cA$ be a semi-ring of sets over $X$.
Suppose a set function $\rho:\cA\to[0,\infty]:\varnothing\mapsto0$ satisfies
\begin{enumerate}[(i)]
\item $\rho$ is \emph{disjointly countably subadditive}: we have
\[\rho\Bigl(\bigsqcup_{i=1}^\infty A_i\Bigr)\le\sum_{i=1}^\infty\rho(A_i)\]
for $(A_i)_{i=1}^\infty\subset\cA$,
\item $\rho$ is \emph{finitely additive}: we have
\[\rho(A_1\sqcup A_2)=\rho(A_1)+\rho(A_2)\]
for $A_1,A_2\in\cA$.
\end{enumerate}
A set function satisfying the above conditions are occasionally called a \emph{pre-measure}.
\begin{parts}
\item
\item 
\end{parts}
\end{prb}

\begin{prb}[Monotone class lemma]
A collection $\cC\subset\cP(X)$ is called a \emph{monotone class} if it is closed under countable increasing unions and countable decreasing intersections.

Let $H$ be a vector space closed under bounded monotone convergence.
If $\spn\{\1_A:A\in\cA\}\subset H$ then $B^\infty(\sigma(\cA))\subset H$.
\end{prb}



\begin{prb}[Steinhaus theorem]
Let $\lambda$ denote the Lebesgue measure on $\R$ and let $\E\subset\R$ be a Lebesgue measurable set with $\lambda(E)>0$.
\begin{parts}
\item For any $0<\alpha<1$, there is an interval $I=(a,b)$ such that $\lambda(E\cap I)>\alpha\lambda(I)$.
\item $E-E=\{x-y:x,y\in E\}$ contains an open interval containing zero.
\end{parts}
\begin{pf}
(a)
We may assum $\lambda(E)<\infty$.
Since $\lambda$ is outer measure and $\lambda(E)\ne0$, we have an open subset $U$ of $\R$ such that $\lambda(U)<\alpha^{-1}\lambda(E)$.
Because $U$ is a countable disjoint union of open intervals $U=\bigsqcup_{i=1}^\infty(a_i,b_i)$, we have
\[\sum_{i=1}^\infty\lambda((a_i,b_i))=\lambda(U)<\alpha^{-1}\lambda(E)=\alpha^{-1}\sum_{i=1}^n\lambda(E\cap(a_i,b_i)).\]
Therefore, there is $i$ such that $\alpha\lambda((a_i,b_i))<\lambda(E\cap(a_i,b_i))$.
\end{pf}
% convolution으로 푸는 방법: continuous approximation　이 레벨에선 무리인듯
\end{prb}




\section*{Problems}
\begin{enumerate}
\item* Every Lebesgue measurable set in $\R$ of positive measure contains an arbitrarily long arithmetic progression.
\end{enumerate}

















\chapter{Measurable functions}



\section{Simple functions}
\begin{prb}[Measurability of pointwise limits]

Conversely, every measurable extended real-valued function is a pointwise limit of simple functions.

\end{prb}
\begin{pf}
Let $f(x)=\lim_{n\to\infty}s_n(x)$.

\end{pf}


\section{Almost everywhere convergence}

\begin{prb}[Almost everywhere convergence]
Let $(X,\mu)$ be a measure space and let $f_n:X\to\bar\R$ and $f:X\to\bar\R$ be measurable functions.
The set of convergence of the sequence $f_n$ is defined as the set
\[\{x\in X:\lim_{n\to\infty}f_n(x)=f(x)\},\]
and the set of divergence is defined as its complement.
We say $f_n$ converges to $f$ \emph{alomst everywhere} with respect to $\mu$ if the set of divergence is a null set in $\mu$.
We simply write
\[f_n\to f\text{ a.e.}\]
if $f_n$ converges to $f$ almost everywhere, and we frequently omit the measure $\mu$ if it has no confusion.
\begin{parts}
\item If $\mu$ is complete and, if $f_n\to f$ a.e., then $f$ is measurable.
\end{parts}
\end{prb}

\begin{prb}[Borel-Cantelli lemma]
Let $(X,\mu)$ be a measure space and let $f_n:X\to\bar\R$ and $f:X\to\bar\R$ be a sequence of measurable functions.
Note that the set of divergence is given by
\[\bigcup_{\e>0}\bigcap_{n=1}^\infty\bigcup_{i=n}^\infty\{x:|f_n(x)-f(x)|\ge\e\}.\]
Each measurable set of the form
\[\{x:|f_n(x)-f(x)|\ge\e\}\]
is sometimes called the \emph{tail event}, coined in probability theory.
\begin{parts}
\item $f_n\to f$ a.e. if and only if for each $\e>0$ we have
\[\mu(\{x:\limsup_{n\to\infty}|f_n(x)-f(x)|\ge\e\})=0.\]
\item $f_n\to f$ a.e. if and only if for each $\e>0$ we have
\[\mu(\limsup_{n\to\infty}\{x:|f_n(x)-f(x)|\ge\e\})=0.\]
\item $f_n\to f$ a.e. if for each $\e>0$ we have
\[\sum_{n=1}^\infty\mu(\{x:|f_n(x)-f(x)|\ge\e\})<\infty.\]
\end{parts}
\end{prb}
\begin{pf}
(b)
The set of divergence of the sequence $f_n$ is given by
\[\bigcup_{m=1}^\infty\bigcap_{n=1}^\infty\bigcup_{i=n}^\infty\{x:|f_i(x)-f(x)|\ge\tfrac1m\}=\bigcup_{m=1}^\infty\,\bigcap_{n=1}^\infty(X\setminus E_n^m).\]

(c)
Since
\[\mu\Bigl(\bigcup_{i=1}^\infty\{x:|f_i(x)-f(x)|\ge\e\}\Bigr)\le\sum_{i=1}^\infty\mu(\{x:|f_i(x)-f(x)|\ge\e\})<\infty,\]
we have by the continuity from above that
\begin{align*}
\mu(\limsup_{n\to\infty}\{x:|f_n(x)-f(x)|\ge\e\})
&=\mu\Bigl(\bigcap_{n=1}^\infty\bigcup_{i=n}^\infty\{x:|f_i(x)-f(x)|\ge\e\}\Bigr)\\
&=\lim_{n\to\infty}\mu\Bigl(\bigcup_{i=n}^\infty\{x:|f_i(x)-f(x)|\ge\e\}\Bigr)\\
&\le\lim_{n\to\infty}\sum_{i=n}^\infty\mu(\{x:|f_i(x)-f(x)|\ge\e\})
=0.\qedhere
\end{align*}
\end{pf}

\begin{prb}[Convergence in measure]
Let $(X,\mu)$ be a measure space and let $f_n:X\to\bar\R$ be a sequence of measurable functions.
We say $f_n$ converges to a measurable function $f:X\to\bar\R$ \emph{in measure} if for each $\e>0$ we have
\[\lim_{n\to\infty}\mu(\{x:|f_n(x)-f(x)|\ge\e\})=0.\]
\begin{parts}
\item If $f_n\to f$ in measure, then there is a subsequence $f_{n_k}$ such that $f_{n_k}\to f$ a.e.
\item If every subsequence $f_{n_k}$ of $f_n$ has a further subsequence $f_{n_{k_j}}$ such that $f_{n_{k_j}}\to f$ a.e., then $f_n\to f$ in measure.
\end{parts}
\end{prb}
\begin{pf}
(a)
Since for each positive integer $k$ we have $\mu(\{x:|f_n(x)-f(x)|\ge\frac1k\})\to0$ as $n\to\infty$, there exists $n_k$ such that
\[\mu(\{x:|f_{n_k}(x)-f(x)|\ge\tfrac1k\})<\frac1{2^k}.\]
By the Borel-Cantelli lemma, we get
\[\mu(\limsup_{k\to\infty}\{x:|f_{n_k}(x)-f(x)|\ge\tfrac1k\})=0.\]
Then, for each $\e>0$,
\begin{align*}
\limsup_{k\to\infty}\{x:|f_{n_k}(x)-f(x)|\ge\e\}
&=\bigcap_{k=\lceil\e^{-1}\rceil}^\infty\bigcup_{j=k}^\infty\{x:|f_{n_j}(x)-f(x)|\ge\e\}\\
&\subset\bigcap_{k=\lceil\e^{-1}\rceil}^\infty\bigcup_{j=k}^\infty\{x:|f_{n_j}(x)-f(x)|\ge\tfrac1k\}\\
&=\limsup_{k\to\infty}\{x:|f_{n_k}(x)-f(x)|\ge\tfrac1k\}
\end{align*}
implies the limit superior of the tail events is a null set, hence $f_{n_k}\to f$ a.e.

(b)
\end{pf}

\begin{prb}[Egorov theorem]
Egorov's theorem informally states that an almost everywhere convergent functional sequence is ``almost'' uniformly convergent.
Through this famous theorem, we introduce a convenient ``$\e/2^m$ argument'', occasionally used throughout measure theory to construct a measurable set having a special property.

Let $(X,\mu)$ be a finite measure space and let $f_n:X\to\bar\R$ be a sequence of measurable functions such that $f_n\to f$ a.e.
For each positive integer $m$, which indexes the tolerance $1/m$, consider an increasing sequence of measurable subsets
\[E_n^m:=\bigcap_{i=n}^\infty\{x:|f_i(x)-f(x)|<\tfrac1m\}.\]
\begin{parts}
\item $E_n^m$ converges to a full set for each $m$.
\item For every $\e>0$ there is a measurable $K\subset X$ such that $\mu(X\setminus K)<\e$ and for each $m$ there is finite $n$ satisfying $K\subset E_n^m$.
\item For every $\e>0$ there is a measurable $K\subset X$ such that $\mu(X\setminus K)<\e$ and $f_n\to f$ uniformly on $K$.
\end{parts}
\end{prb}
\begin{pf}
(a)
Recall that the a.e. convergence $f_n\to f$ means that for every fixed $m$ the intersection
\[\bigcap_{n=1}^\infty(X\setminus E_n^m)=\limsup_n\{x:|f_n(x)-f(x)|\ge\tfrac1m\}\]
is a null set.
Since $\mu(X)<\infty$, it is equivalent to $E_n^m$ converges to a full set for each $m$ by the continuity from above.

(b)
For each $m$, we can find $n_m$ such that
\[\mu(X\setminus E_{n_m}^m)<\frac\e{2^m}.\]
If we define
\[K:=\bigcap_{m=1}^\infty E_{n_m}^m,\]
then it satisfies the second conclusion, and also have
\[\mu(X\setminus K)=\mu\Bigl(\bigcup_{m=1}^\infty(X\setminus E_{n_m}^m)\Bigr)\le\sum_{m=1}^\infty\mu(X\setminus E_{n_m}^m)<\sum_{m=1}^\infty\frac\e{2^m}=\e.\]


(c)
Fix $m>0$.
Since $n\ge n_m$ implies $K\subset E_{n_m}^m\subset E_n^m$, we have
\[n\ge n_m\quad\Rightarrow\quad\sup_{x\in K}|f_n(x)-f(x)|<\frac1m.\qedhere\]
\end{pf}



\section*{Exercises}
\begin{prb}[Cauchy's functional equation]
Let $f:\R\to\R$ be a function.
Cauchy's functional equation refers to the equation $f(x+y)=f(x)+f(y)$, satisfied for all $x,y\in\R$.
Suppose $f$ satisfies the Cauchy functional equation.
We ask if $f$ is linear, that is $f(x)=ax$ for all $x\in\R$, where $a:=f(1)$.
\begin{parts}
\item $f(x)=ax$ for all $x\in\Q$, but there is a nonlinear solution of Cauchy's functional equation.
\item If $f$ is conitnuous at a point, then $f$ is linear.
\item If $f$ is Lebesgue measurable, then $f$ is linear.
\end{parts}
\end{prb}

\begin{prb}[Pointwise approximation by simple functions]
Let $(X,\mu)$ be a measure space and $X$ a metric space with Borel measurable structure.
By a \emph{simple function} we mean a measurable function $s:X\to X$ of finite image.
\begin{parts}
\item For each open set $U\subset X$ there is a sequence of open sets $U_i$ such that $U=\bigcup_iU_i$ and $\bar U_i\subset U$.
Let $f:X\to X$ be any function.
\item If $f$ is the pointwise limit of a sequence of measurable functions, then $f$ is measurable.
\item If $f$ is measurable, then $f$ is the pointwise limit of a sequence of simple functions, if $X$ is separable.
\item* The pointwise limit of a net of simple functions may not be measurable.
\end{parts}
\end{prb}
\begin{pf}

(b)
Suppose a sequence $(f_n)_n$ of measurable functions converges pointwisely to a function $f$.
For fixed open $U\subset X$ we claim
\[f^{-1}(U)=\bigcup_{i=1}^\infty\ \liminf_{n\to\infty}\ f_n^{-1}(U_i).\]
If it is true, then $f^{-1}(U)$ is the countable set operation of measurable sets $f_n^{-1}(U_i)$.
Let $U_i$ be the sequence associated to $U$ taken by the part (a).

($\subset$) If $\omega\in f^{-1}(U)$, then for some $i$ we have $f(\omega)\in U_i$, so $f_n(\omega)$ is eventually in $U_i$, thus we have $\omega\in\liminf_{n\to\infty}f_n^{-1}(U_i)$.

($\supset$) If $\omega\in\liminf_{n\to\infty}f_n^{-1}(U_i)$ for some $i$, then $f_n(\omega)$ is eventually in $U_i$, so $f(\omega)\in\bar U_i\subset U$, thus we have $\omega\in f^{-1}(U)$.

(c)
Suppose there is a increasing sequence of finite tagged partitions $\cP_n\subset\cB$ satisfying the following property: for each open-neighborhood pair $(x,U)$ there is $n$ and $i$ such that $P_{n,i}\in\cP_n$ and $x\in P_{n,i}\subset U$.
We denote the tags by $t_{n,i}\in P_{n,i}$ for each $P_{n,i}\in\cP_n$.
Define
\[s_n(\omega):=t_{n,i}\quad\text{for}\quad f(\omega)\in P_{n,i}.\]
To show $s_n(\omega)\to f(\omega)$, fix an open $f(\omega)\in U\subset X$.
Then, there is $n_0$ such that there is a sequence $(P_{n,i_n})_{n=n_0}^\infty$ satisfying $P_{n,i_n}\in\cP_n$ and $f(\omega)\in P_{n,i_n}\subset U$.
Then, for all $n\ge n_0$, we have for $f(\omega)\in P_{n,i_n}$ that $s_n(\omega)=t_{n,i_n}\in P_{n,i_n}\subset U$.

The existence of such sequence of partitions...

Another approach: mimicking Pettis measurability theorem.
\end{pf}










\chapter{Lebesgue integral}
\section{Monotone convergence theorem}

% Stein: Egorov $\to$ BCT $\to$ Fatou $\to$ MCT $\to$ L1<M\\
% Stein: BCT + L1<M $\to$ DCT\\
% Folland: MCT $\to$ Fatou $\to$ DCT $\to$ BCT

\begin{prb}[Lebesgue integral of non-negative functions]
Let $(X,\mu)$ be a measure space.
Let $f:X\to\R_{\ge0}$ be a measurable function.
The \emph{Lebesgue integral} of $f$ is defined by
\[\int f\,d\mu:=\sup\left\{\int s\,d\mu:0\le s\le f,\ \text{$s$ simple}\right\}\]
\end{prb}

\begin{prb}[Monotone convergence theorem]
Let $(X,\mu)$ be a measure space.
Let $f_n$ and $f$ be measurable functions $X\to\R_{\ge0}$.
\begin{parts}
\item $E\mapsto\int_Ef\,d\mu$ is a measure if $f$ is simple.
\item $E\mapsto\int_Ef\,d\mu$ is a measure even if $f$ is not simple.
\item If $f_n\uparrow f$ a.e., then $\int f_n\to\int f$.
\end{parts}
\end{prb}
\begin{pf}
(a)
Clear from the linearity of the integral for simple functions.

(b)
For $E_n\uparrow E$, we want to show the continuity from below, $\tint_{E_n}f\to\tint_Ef$.
Take $\e>0$.
We introduce a continuous bijection $\beta:[0,\infty]\to[0,1]:t\mapsto t/(1+t)$ to avoid dividing the cases for infinity.
By the definition of the Lebesgue integral, we have a simple function $s$ such that $0\le s\le f$ and
\[\beta(\tint_Ef)-\beta(\tint_Es)<\e,\]
whether or not $\int_Ef$ diverges.
Then,
\begin{align*}
\beta(\tint_Ef)-\beta(\tint_{E_n}f)
&=[\beta(\tint_Ef)-\beta(\tint_Es)]
+[\beta(\tint_Es)-\beta(\tint_{E_n}s)]
+[\beta(\tint_{E_n}s)-\beta(\tint_{E_n}f)]\\
&<\e+[\beta(\tint_Es)-\beta(\tint_{E_n}s)]+0
\xrightarrow{n\to\infty}\e
\end{align*}
%\begin{alignat*}{4}
%\beta(\tint_Ef)-\beta(\tint_{E_n}f)
%&=[\beta(\tint_Ef)-\beta(\tint_Es)]
%&&+[\beta(\tint_Es)-\beta(\tint_{E_n}s)]
%&&+[\beta(\tint_{E_n}s)-\beta(\tint_{E_n}f)]\\
%&\ccol{<}{\e}
%&&+[\beta(\tint_Es)-\beta(\tint_{E_n}s)]
%&&\ccol{+}{0}\\
%&\xrightarrow{n\to\infty}\e
%\end{alignat*}
by the part (a).
We are done by letting $\e\to0$.

(c)
For any $\e>0$ let $E_n:=\{x:f(x)<(1+\e)f_n(x)\}$, which converges to a full set because $f_n\to f$ a.e.
Since $f$ is a measure, we can choose $N$ such that
\[\beta(\tint_Ef)-\beta(\tint_{E_N}f)<\e.\]
With this $N$, we have
\[\beta(\tint_{E_N}f)
\le\beta((1+\e)\tint_{E_N}f_n)
\le(1+\e)\beta(\tint_{E_N}f_n)
\le\beta(\tint_{E_N}f_n)+\e,\qquad n\ge N.\]
Then, we have for $n\ge N$ that
\begin{align*}
\beta(\tint_Ef)-\beta(\tint_Ef_n)
&=[\beta(\tint_Ef)-\beta(\tint_{E_N}f)]+[\beta(\tint_{E_N}f)-\beta(\tint_{E_N}f_n)]+[\beta(\tint_{E_N}f_n)-\beta(\tint_{E}f_n)]\\
&<\e+\e+0,
\end{align*}
so we are done by letting $n\to\infty$ and $\e\to0$.
\end{pf}

\begin{prb}[Corollaries of monotone convergence theorem]
Fatou's lemma, linearity of the integral, $f\ge0$ and $\int f=0$ imply $f=0$ a.e.
\end{prb}


\section{Dominated convergence theorem}


\begin{prb}[Lebesgue integral of complex-valued functions]
\end{prb}

\begin{prb}[Bounded convergence theorem]
Semifinite measures
\begin{parts}
\item
\[\sup_{g\le f}\int g\,d\mu=\int f\,d\mu\]
where $g$ runs through bounded measurable functions.
\item
\end{parts}
\end{prb}


\section{Product measures}

\begin{prb}[Fubini-Tonelli theorem]
Lebesgue measure on Euclidean spaces
\end{prb}




\section*{Exercises}
\begin{prb}[Convergence of one-parameter family]
\end{prb}



If $\|f_n\|_{L^2([0,1])}\le C$ and $f_n\to f$ almost everywhere, then $f_n\to f$ weakly.

\[\lim_{n\to\infty}\int_0^1n^3x^2(1-x)^n\,dx=2\ne0=\int_0^1\lim_{n\to\infty}n^3x^2(1-x)^n\,dx.\]
\[\lim_{n\to\infty}\int_0^\infty n^2e^{-nx}\,dx=\infty\ne0=\int_0^\infty\lim_{n\to\infty}n^2e^{-nx}\,dx.\]

\part{}


\chapter{Signed measures}




\section{Radon-Nikodym theorem}

An integrable function as a measure
$\sigma$-finite measures



\chapter{Borel measures}



\section{Continuous functions on metric spaces}

partition of unity.
Urysohn and Tietze.


\begin{prb}[Regular Borel measures on metric spaces]
Let $\mu$ be a Borel measure on a metric space $X$.
We say $\mu$ is \emph{outer regular} if
\[\mu(E)=\inf\{\mu(U):E\subset U,\,U\text{ open}\},\]
and say $\mu$ is \emph{inner regular} if
\[\mu(E)=\sup\{\mu(F):F\subset E,\,F\text{ closed}\},\]
for every Borel subset $E\subset X$.
If $\mu$ is both outer and inner regular, we say $\mu$ is \emph{regular}.
\begin{parts}
\item Let $E$ be $\sigma$-finite. Then, $E$ is $\mu$-regular if and only if for any $\e>0$ there are open $U$ and closed $F$ such that $F\subset E\subset U$ and $\mu(U\setminus F)<\e$.
\item If $\mu$ is $\sigma$-finite, then the set of $\mu$-regular subsets is a $\sigma$-algebra. (may be extended?)
\item Every closed set is $G_\delta$.
\item Every finite Borel measure on $X$ is regular.
\end{parts}
\end{prb}
\begin{pf}
\end{pf}




\begin{prb}[Luzin's theorem]
Let $\mu$ be a regular Borel measure on a metric space $X$.
Let $f:X\to\R$ be a Borel measurable function.
Two proofs: direct and Egoroff.
% Important properties: NORMALITY for Tietze, and $\sigma$-FINITENESS for U,F squeezing.
\begin{parts}
\item If $E\subset X$ is $\sigma$-finite, then there is a continuous $g$ blabla
\item If $f$ vanishes outside a $\sigma$-finite set, then for any $\e>0$ there is a closed set $F\subset X$ such that $f|_F:F\to\R$ is continuous and $\mu(X\setminus F)<\e$.
\item If $f$ vanishes outside a $\sigma$-finite set, then for any $\e>0$ there is a closed set $F\subset X$ and continuous $g:X\to\R$ such that $f|_F=g|_F$ and $\mu(X\setminus F)<\e$.
\item If $f$ is further bounded, then $g$ also can be taken to be bounded.
\end{parts}
\end{prb}
\begin{pf}
(a)
Let $\e>0$ and suppose $E\subset X$ is measurable with $\mu(E)<\infty$.
Since $E$ is $\sigma$-finite, we have open $U$ and closed $F$ such that $F\subset E\subset U$ and $\mu(U\setminus F)<\e/2$.
By the Urysohn lemma, there is a continuous function $g:X\to[0,1]$ such that $g|_{U^c}=0$ and $g|_F=1$.
Then,
\[\int|\1_E-g|\,d\mu=\int_{U\setminus F}|\1_E-g|\,d\mu\le2\mu(U\setminus F)<\e.\]

(b)
Since $\R$ is second countable, we have a base $(V_n)_{n=1}^\infty$ of $\R$.
Since $\mu$ is $\sigma$-finite, for each $n$ we can take open $U_n$ and closed $F_n$ such that
\[F_n\subset f^{-1}(V_n)\subset U_n\]
and $\mu(U_n\setminus F_n)<\e/2^n$.
Define $F:=\left(\bigcup_{n=1}^\infty(U_n\setminus F_n)\right)^c$ so that $\mu(X\setminus F)<\e$ and $F$ is closed.
Then,
\begin{align*}
U_n\cap F
&=U_n\cap((U_n^c\cup F_n)\cap F)\\
&=(U_n\cap(U_n^c\cup F_n))\cap F\\
&=(\varnothing\cup(U_n\cap F_n))\cap F\\
&\subset F_n\cap F
\end{align*}
proves $f^{-1}(V_n)$ is open in $F$ for every $n$, hence the continuity of $f|_F$.
(In fact, we require that $X$ to be just a topological space.)

(b')
We can alternatively use the part (a) and the Egoroff theorem.
By the part (a), we can construct a sequence $(f_n)$ of continuous functions $X\to\R$ such that $f_n\to f$ in $L^1$.
By taking a subsequence, we may assume $f_n\to f$ pointwise.
Assuming $\mu$ is finite, by the Egorov theorem, there is a measurable $A\subset X$ such that $f_n\to f$ uniformly on $A$ and $\mu(X\setminus A)<\e/2$.
Since $\mu$ is inner regular, we have closed $F\subset A$ such that $\mu(A\setminus F)<\e/2$, so that we have $\mu(X\setminus F)<\e$.
Then, $f$ is continuous on $A$, and of course on $F$.

\end{pf}



\begin{prop}
A $\sigma$-finite Radon measure is regular.
\end{prop}
\begin{pf}
First we approximate Borel sets of finite measure, with compact sets.
Let $E$ be a Borel set with $\mu(E)<\infty$ and $U$ be an open set containing $E$.
By outer regularity, there is an open set $V\supset U-E$ such that
\[\mu(V)<\mu(U-E)+\frac\e2.\]
By inner regularity, there is a compact set $K\subset U$ such that
\[\mu(K)>\mu(U)-\frac\e2.\]
Then, we have a compact set $K-V\subset K-(U-E)\subset E$ such that
\begin{align*}
\mu(K-V)&\ge\mu(K)-\mu(V)\\
&>\left(\mu(U)-\frac\e2\right)-\left(\mu(U-E)+\frac\e2\right)\\
&\ge\mu(E)-\e.
\end{align*}
It implies that a Radon measure is inner regular on Borel sets of finite measures.

Suppose $E$ is a $\sigma$-finite Borel set so that $E=\bigcup_{n=1}^\infty E_n$ with $\mu(E_n)<\infty$.
We may assume $E_n$ are pairwise disjoint.
Let $K_n$ be a compact subset of $E_n$ such that
\[\mu(K_n)>\mu(E_n)-\frac\e{2^n},\]
and define $K=\bigcup_{n=1}^\infty K_n\subset E$.
Then,
\[\mu(K)=\sum_{n=1}^\infty\mu(K_n)>\sum_{n=1}^\infty\left(\mu(E_n)-\frac\e{2^n}\right)=\mu(E)-\e.\]
Therefore, a Radon measure is inner regular on all $\sigma$-finite Borel sets.
\end{pf}


\section{Locally compact spaces}


compact  closed set not containing infty\\
open     open not containing infty\\
closed   closed set containing infty\\

for a measure that ``vanishes at infty'' = tight\\
two definitions of inner regularity is equivalent.\\

inner regular on compact sets -> inner regular on closed sets\\
inner regular on compact sets + sigma finite -> tight\\

\begin{prb}[One-point compactification]
\end{prb}

\begin{prb}[Regular Borel measures on locally compact metric spaces]
sss
\begin{parts}
\item $C_c(X)$ is dense in $L^p(\mu)$ for $1\le p<\infty$.
\item If $\mu$ is $\sigma$-finite, then for any $\e>0$ there is compact $K\subset X$ and continuous $g:X\to\R$ such that $f|_K=g|_K$ and $\mu(X\setminus K)<\e$.
\end{parts}
\end{prb}


\begin{prb}[Tightness and inner regularity]
We have a similar but confusing concept called tightness; we say a Borel measure $\mu$ on a topological space $X$ is \emph{tight} if for any $\e>0$ there is a compact $K\subset X$ such that $\mu(X\setminus K)<\e$.

History of Bourbaki's text.
\begin{parts}
\item
\end{parts}
\end{prb}





\section{Riesz-Markov-Kakutani representation theorem}

% 1. most general -> Radon
% 2. sigma-finite -> regular measures
% 3. loc finite, metrizable(=2nd cntbl) LCH -> Borel measures
% 4. finite, metrizable -> Borel measures

% pde, prob, spectral theorem -> 4.
% Haar meas on Lie group, number theory -> 3.
% c* algebra, choquet -> compact but bad topology -> 2.
% Haar meas on LCG -> may not be sigma-finite -> 1.

% 이제 증명들이 어느 정도 수준에서 가능한 지를 보자
% C_c version

\begin{prb}[Radon measures]
Let $X$ be a locally compact metric space.
A \emph{Radon measure} is a Borel measure $\mu$ on $X$ such that
\begin{enumerate}[(i)]
\item $\mu$ is outer regular for every Borel set: $\mu(E)=\inf\{\mu(U):E\subset U,\,U\text{ open}\}$ for Borel $E\subset X$,
\item $\mu$ is inner regular for every open set: $\mu(U)=\sup\{\mu(K):K\subset U,\,K\text{ compact}\}$ for open $U\subset X$,
\item $\mu$ is locally finite.
\end{enumerate}
\begin{parts}
\item A $\sigma$-finite Radon measure is regular.
\item If every open subset of $X$ is $\sigma$-compact, then a locally finite Borel measure is Radon.
\item $C_c(X)$ is dense in $L^p(\mu)$ for $1\le p<\infty$.
\end{parts}
\end{prb}

\begin{prb}[Riesz-Markov-Kakutani representation theorem for $C_0(X)$]
Let $X$ be a locally compact metric space.
We want to establish the following one-to-one correspondence:
\[\begin{array}{ccc}
\{\text{finite Radon measures on $X$}\} & \xrightarrow{\sim} & \{\text{positive linear functionals on $C_0(X)$}\}\\
\mu & \mapsto & (f\mapsto\int f\,d\mu).
\end{array}\]
Let $I$ a positive linear functional on $C_0(X)$.
Let $\cT$ be the set of all open subsets of $X$ and $\mu_0:\cT\to[0,\infty]$ a set function defined such that
\[\mu_0(U):=\sup\{I(f):f\in C_c(U,[0,1])\},\qquad U\in\cT.\]
Let $\mu^*:\cP(X)\to[0,\infty]$ be the associated outer measure defined by
\[\mu^*(S):=\inf\left\{\sum_{i=1}^\infty\mu_0(U_i):S\subset\bigcup_{i=1}^\infty U_i,\ U_i\in\cT\right\},\qquad S\in\cP(X),\]
and let $\mu:=\mu^*|_\cA$ be the restriction, where $\cA$ is the $\sigma$-algebra of Carath\'eodory measurable subsets relative to $\mu^*$.
\begin{parts}
\item $\mu^*$ extends $\mu_0$.
\item $\mu$ extends $\mu_0$.
\item $\mu$ is a finite Radon measure.
\item The correspondence is surjective.
\item The correspondence is injective.
\end{parts}
\end{prb}
\begin{pf}
(a)
It suffices to show that $\mu_0$ satisfies monotonically countably subadditive.
For an open set $U$ and a countable open cover $\{U_i\}_{i=1}^\infty$ of $U$ we claim that $\rho(U)\le\sum_{i=1}^\infty\rho(U_i)$.

Take any $f\in C_c(U,[0,1])$ and find a finite subcover $\{U_{i_k}\}_{k=1}^n$ of $\{U_i\}$ together with a partition of unitiy $\{\chi_{i_k}\}$ subordinate to the open cover $\{U_{i_k}\cap\supp f\}_k$.
Now we have $f\chi_{i_k}\in C_c(U_{i_k},[0,1])$ for each $k$, because then $I$ is linear so that it preserves finite sum, we have
\[I(f)=\sum_{k=1}^n I(f\chi_{i_k})\le\sum_{k=1}^n\mu_0(U_{i_k})\le\sum_{i=1}^\infty\mu_0(U_i).\]
Since $f$ is arbitrary, we are done.

(b)
We claim $\cT\subset\cA$.
It suffices to show $\mu^*(E\cap U)+\mu^*(E\setminus U)\le\mu^*(E)$ for any measurable $E$ and open $U$.
Take $\e>0$.
Since we may assume $\mu^*(E)<\infty$, there is a countable open cover $\{U_i\}_{i=1}^\infty$ of $E$ such that
\[\sum_{i=1}^\infty\mu_0(U_i)<\mu^*(E)+\frac\e3.\]
Take $f_i\in C_c(U_i\cap U,[0,1])$ such that
\[\mu_0(U_i\cap U)<I(f_i)+\frac13\cdot\frac\e{2^i},\]
and take $g_i\in C_c(U_i\setminus\supp f_i,[0,1])$ such that
\[\mu_0(U_i\setminus\supp f_i)<I(g_i)+\frac13\cdot\frac\e{2^i}.\]
Then, since $f_i+g_i\in C_c(U_i,[0,1])$, we have
\begin{align*}
\mu^*(E\cap U)+\mu^*(E\setminus U)
&\le\sum_{i=1}^\infty\mu_0(U_i\cap U)+\sum_{i=1}^\infty\mu_0(U_i\setminus U)\\
&<\sum_{i=1}^\infty I(f_i+g_i)+\frac\e3+\frac\e3\\
&<\sum_{i=1}^\infty\mu_0(U_i)+\frac23\e\\
&\le\mu^*(E)+\e.
\end{align*}
Limiting $\e\to0$, we get the desired inequality.

(c)
Since $\mu$ is a countably additive and $\cT$ is closed under union, we can rewrite
\[\mu^*(S)=\inf\{\mu_0(U):S\subset U\in\cT\},\qquad S\in\cP(X),\]
hence $\mu$ is outer regular.
Here now we claim for $f\in C_c(X,[0,1])$ and $0<a<1$ that
\[a\mu(f^{-1}((a,1]))\le I(f)\le\mu(\supp f).\]
If it is true, then the right inequality implies the inner regularity, and the left inequality together with the Urysohn lemma implies the local finiteness.

The right inequality directly follows from the definition of $\mu_0$ and the outer regularity
\[I(f)\le\inf\{\mu_0(U):\supp f\subset U\in\cT\}=\mu(\supp f).\]
For the left, if $h\in C_c(f^{-1}((a,1]),[0,1])$, then the inequality $ah\le f$ implies
\[a\mu(f^{-1}((a,1]))=a\mu_0(f^{-1}((a,1]))\le aI(h)\le I(f).\]

(d)
We will show $I(f)=\int f\,d\mu$ for $f\in C_c(X)$.
Since $C_c(X)$ is the linear span of $C_c(X,[0,1])$, we may assume $f\in C_c(X,[0,1])$.
For a fixed positive integer $n$ and for each index $1\le i\le n$, let $K_i:=f^{-1}([i/n,1])$ and define
\[f_i(x):=\begin{cases}\frac1n&\text{ if }x\in K_i,\\f(x)-\frac{i-1}n&\text{ if }x\in K_{i-1}\setminus K_i,\\0&\text{ if }x\in X\setminus K_{i-1},\end{cases}\]
where $K_0:=\supp f$.
Note that $f_i\in C_c(X,[0,n^{-1}])$ and $f=\sum_{i=1}^nf_i$.
For $1\le i\le n$ we have $\mu(K_i)<\infty$ because $K_i$ is compact subsets contained in a locally compact Hausdorff space $U:=f^{-1}((0,1])$.
By the previous claim and the property of integral, we have
\[\frac{\mu(K_i)}n\le I(f_i),\qquad\frac{\mu(K_i)}n\le\int f_i\,d\mu,\qquad1\le i\le n\]
and
\[I(f_i)\le\frac{\mu(K_{i-1})}n,\qquad\int f_i\,d\mu\le\frac{\mu(K_{i-1})}n,\qquad2\le i\le n.\]
Then, using the above inequalities and $\mu(K_n)\ge0$, we have
\[I(f)\le I(f_1)+\int f\,d\mu\quad\text{and}\quad\int f\,d\mu\le\int f_1\,d\mu+I(f).\]
Note that $f_1=\min\{f,n^{-1}\}$ is a sequence of functions indexed by $n$.
By the monotone convergence theorem, $\int f_1\,d\mu\to0$ as $n\to\infty$.
We now show $I(f_1)$ converges to zero.
If we let $U:=f^{-1}((0,1])$, then $U$ is locally compact and $f_1\in C_0(U)\subset C_c(X)$, and since a positive linear functional on $C_0(U)$ is bounded, we have $I(f_1)\le n^{-1}\|I\|\to0$ as $n\to\infty$.
($\mu(K_0)$ is possibly infinite if $X$ is not locally compact so that $\mu$ is not locally finite.)

(e)
Let $\mu$ and $\nu$ be finite Radon measures on $X$ such that
\[\int g\,d\mu=\int g\,d\nu\]
for all $g\in C(X)$.
Let $E$ be any measurable set.
Since $\mu+\nu$ is a finite Radon measure, and by the Luzin theorem, we have a closed set $F$ and $g\in C(X)$ with $0\le g\le1$ such that $\1_E|_F=g|_F$ and $(\mu+\nu)(X\setminus F)<\e/2$.
Then,
\begin{align*}
|\mu(E)-\nu(E)|&=|\int\1_E\,d\mu-\int\1_E\,d\nu\,|\\
&\le\int_{X\setminus F}|\1_E-g|\,d\mu+\int_{X\setminus F}|g-\1_E|\,d\nu\\
&\le2\mu(X\setminus F)+2\nu(X\setminus F)<\e.
\end{align*}
By limiting $\e\to0$, we have $\mu(E)=\nu(E)$.
\end{pf}


\begin{prb}[Dual of continuous function spaces]
\end{prb}



\section{Hausdorff measures}


\section*{Exercises}











\chapter{Lebesgue spaces}
\section{$L^p$ spaces}

\begin{prb}[H\"older inequality]
\end{prb}
\begin{pf}
\[\int fg\le C^p\int\frac{|f|^p}p+\frac1{C^q}\int\frac{|g|^q}q\]
Take $C$ such that
\[C^p\int\frac{|f|^p}p=\frac1{C^q}\int\frac{|g|^q}q.\]
Then,
\[C^p\int\frac{|f|^p}p+\frac1{C^q}\int\frac{|g|^q}q=2p^{-\frac1p}q^{-\frac1q}\Bigl(\int|f|^p\Bigr)^{\frac1p}\Bigl(\int|g|^p\Bigr)^{\frac1q}.\]
Note that we can show that $1\le2p^{-\frac1p}q^{-\frac1q}\le2$ and the minimum is attained only if $p=q=2$, so this method does not provide the sharpest constant.
\end{pf}


\section{$L^1$ spaces}

\begin{prb}[Convolution?]
\end{prb}
\begin{prb}[Approximate identity?]
\end{prb}
\begin{prb}[Continuity of translation?]
\end{prb}

\section{$L^2$ spaces}

\section{$L^\infty$ spaces}







\part{Distribution theory}
\chapter{Test functions}


\chapter{Distributions}


\chapter{Linear operators}

\section{Boundedness}

Translation and multiplication operators

\begin{prb}[Bitranspose extension]
\end{prb}


\section{Kernels}
\begin{prb}[Schur test]
\end{prb}
\begin{prb}[Young's inequality of integral operators]
\end{prb}

\section{Convolution}
\begin{prb}[Approximation of identity]
Fej\'er, Poisson, box?
\end{prb}
\begin{prb}[Summability methods]
\end{prb}











\part{Fundamental theorem of calculus}

\chapter{Absolute continuity}

The space of weakly differentiable functions with respect to all variables $=W_\loc^{1,1}$.

\begin{prb}[Product rule for weakly differentiable functions]
We want to show that if $u$, $v$, and $uv$ are weakly differentiable with respect to $x_i$, then $\pd_{x_i}(uv)=\pd_{x_i}uv+u\pd_{x_i}v$.
\begin{parts}
\item If $u$ is weakly differentiable with respect to $x_i$ and $v\in C^1$, then $\pd_{x_i}(uv)=\pd_{x_i}uv+u\pd_{x_i}v$.
\end{parts}
\end{prb}


\begin{prb}[Interchange of differentiation and integration]
Let $f:X_x\times X_y\to\R$ be such that $\pd_{x_i}f$ is well-defined. Suppose $f$ and $\pd_{x_i}f$ are locally integrable in $x$ and integrable $y$.

Then,
\[\pd_{x_i}\int f(x,y)\,dy=\int\pd_{x_i}f(x,y)\,dy.\]
\end{prb}


Do not think the Schwarz theorem as the condition for partial differentiation to commute.
We should understand like this: if $F$ is $C^2$ then the \emph{classical} partial differentiation commute, and if $F$ is not $C^2$ then the \emph{classical} partial derivatives of order two or more are \emph{meaningless} because it is not compatible with the generalized concept of differentiation.



\section{Absolutely continuity}

\begin{parts}
\item $f$ is $\Lip_\loc$ iff $f'$ is $L_\loc^\infty$
\item $f$ is $\textrm{AC}_\loc$ iff $f'$ is $L_\loc^1$
\end{parts}
\begin{parts}
\item $f$ is $\Lip$ iff $f'$ is $L^\infty$
\item $f$ is $\textrm{AC}$ iff $f'$ is $L^1$
\item $f$ is $\textrm{BV}$ iff $f'$ is a finite regular Borel measure
\end{parts}

\begin{prb}[Absolute continuous measures]
\end{prb}

\begin{prb}[Absolute continuous functions]
\end{prb}

\begin{prb}[Functions of bounded variation]
\end{prb}



\section{Interpolations}
weak Lp, marcinkiewicz

\begin{defn}
Let $f$ be a measurable function on a measure space $(X,\mu)$.
The \emph{distribution function} $\lambda_f:[0,\infty)\to [0,\infty)$ is defined as:
\[\lambda_f(\alpha):=\mu(\{x:|f(x)|>\alpha\})=\mu(|f|>\alpha).\]
\end{defn}

Do not use $\mu(\{x:|f(x)|\ge\alpha\})$.
The strict inequality implies the \emph{lower semi-continuity} of $\lambda_f$.


For $p>0$,
\begin{align*}
\|f\|_{L^p}^p
&=\int|f(x)|^p\,d\mu(x)\\
&=\int\int_0^{|f(x)|}p\alpha^{p-1}\,d\alpha\,d\mu(x)\\
&=\int_0^\infty\int_{|f(x)|>\alpha}p\alpha^{p-1}\,d\mu(x)\,d\alpha\\
&=p\int_0^\infty\left[\alpha\cdot\mu(|f|>\alpha)^\frac1p\right]^p\,\frac{d\alpha}\alpha.
\end{align*}

\begin{defn}
\[\|f\|_{L^{p,q}}^q:=p\int_0^\infty\left[\alpha\cdot\mu(|f|>\alpha)^\frac1p\right]^q\,\frac{d\alpha}\alpha.\]
Also,
\[\|f\|_{L^{p,\infty}}:=\sup_{0<\alpha<\infty}\left[\alpha\cdot\mu(|f|>\alpha)^\frac1p\right].\]
\end{defn}
\begin{thm}
For $p\ge1$ we have $\|f\|_{p,\infty}\le\|f\|_p$.
\end{thm}
\begin{pf}
By the Chebyshev inequality,
\[\sup_{0<\alpha<\infty}\left[\alpha^p\cdot\mu(|f|>\alpha)\right]\le\int_0^\infty p\alpha^{p-1}\cdot\mu(|f|>\alpha)\,d\alpha=\|f\|_{L^p}^p.\]

\end{pf}

\begin{prb}[Marcinkiewicz interpolation]
Let $X$ be a $\sigma$-finite measure space and $Y$ be a measure space.
Let
\[1<p_0<p<p_1<\infty.\]
If a sublinear operator $T\colon L^{p_0}(X)+L^{p_1}(X)\to M(Y)$ has two weak-type estimates
\[\|T\|_{L^{p_0}(X)\to L^{p_0,\infty}(Y)}<\infty\quad\text{and}\quad\|T\|_{L^{p_1}(X)\to L^{p_1,\infty}(Y)}<\infty,\]
then it has a strong-type estimate
\[\|T\|_{L^p(X)\to L^p(Y)}<\infty.\]
\end{prb}
\begin{pf}
Let $f\in L^p(X)$ and denote $f_h=\chi_{|f|>\alpha}f$ and $f_l=\chi_{|f|\le\alpha}f$.
It is easy to show $f_h\in L^{p_0}$ and $f_l\in L^{p_1}$.
Then,
\begin{align*} % 고치던 중
\|Tf\|_{L^p(Y)}^p&\sim\int\alpha^p\cdot\mu(|Tf|>\alpha)\,\frac{d\alpha}\alpha\\
&\lesssim\int\alpha^p\cdot\mu(|Tf_h|>\alpha)\,\frac{d\alpha}\alpha+\int\alpha^p\cdot\mu(|Tf_l|>\alpha)\,\frac{d\alpha}\alpha\\
&\le\int\alpha^p\cdot\frac1{\alpha^{p_0}}\|Tf_h\|_{L^{p_0,\infty}}^{p_0}\,\frac{d\alpha}\alpha+\int\alpha^p\cdot\frac1{\alpha^{q_1}}\|Tf_l\|_{L^{p_1,\infty}}^{p_1}\,\frac{d\alpha}\alpha\\
&\lesssim\int\alpha^{p-p_0}\|f_h\|_{p_0}^{p_0}\,\frac{d\alpha}\alpha+\int\alpha^{p-p_1}\|f_l\|_{p_1}^{p_1}\,\frac{d\alpha}\alpha\\
&\sim\|f\|_p^p.
\end{align*}
by (1) Fubini, (2) Sublinearlity, (3) Chebyshev, (4) Boundedness, (5) Fubini.
\end{pf}

\begin{prb}[Hadamard's three line lemma]
Let $f$ be a bounded holomorphic function on vertical unit strip $\{z:0<\Re z<1\}$ which is continuously extended to the boundary.
Then, for $0<\theta<1$ we have
\[\|f\|_{L^\infty(\Re=\theta)}\le\|f\|_{L^\infty(\Re=0)}^{1-\theta}\|f\|_{L^\infty(\Re=1)}^\theta.\]
\end{prb}
\begin{pf}
Fix $n$ and define
\[g_n(z):=\frac{f(z)}{\|f\|_{L^\infty(\Re=0)}^{1-z}\|f\|_{L^\infty(\Re=1)}^z}e^{-\frac{z(1-z)}n}.\]
Then,
\[|g_n(z)|\le e^{-\frac{(\Im z)^2}n}\]
for $z$ in the strip.
By the maximum principle,
\[|f(z)|\le\|f\|_{L^\infty(\Re=0)}^{1-\theta}\|f\|_{L^\infty(\Re=1)}^\theta e^{\frac{y^2}n}.\]
Letting $n\to\infty$, we are done.
\end{pf}



\begin{prb}[Riesz-Thorin interpolation]
Let $X,Y$ be $\sigma$-finite measure spaces.
Let
\[\frac1{p_\theta}=(1-\theta)\frac1{p_0}+\theta\frac1{p_1},\qquad\frac1{q_\theta}=(1-\theta)\frac1{q_0}+\theta\frac1{q_1}.\]
Then,
\[\|T\|_{p_\theta\to q_\theta}\le\|T\|_{p_0\to q_0}^{1-\theta}\|T\|_{p_1\to q_1}^\theta.\]
\end{prb}
\begin{pf}
Note that
\[\|T\|_{p_\theta\to q_\theta}=\sup_f\frac{\|Tf\|_{q_\theta}}{\|f\|_{p_\theta}}=\sup_{f,g}\frac{|\<Tf,g\>|}{\|f\|_{p_\theta}\|g\|_{q'_\theta}}.\]
Consider a holomorphic function
\[z\mapsto\<Tf_z,g_z\>=\int\bar{g_z(y)}Tf_z(y)\,dy,\]
where $f_z$ and $g_z$ are defined as
\[f_z=|f|^{\frac{p_\theta}{p_0}(1-z)+\frac{p_\theta}{p_1}z}\frac f{|f|}\]
so that we have $f_\theta=f$ and
\[\|f\|_{p_\theta}^{p_\theta}=\|f_z\|_{p_x}^{p_x}\]
for $\Re z=x$.

Then,
\[|\<Tf_z,g_z\>|\le\|T\|_{p_0\to q_0}\|f_z\|_{p_0}\|g_z\|_{q'_0}=\|T\|_{p_0\to q_0}\|f\|_{p_\theta}^{p_\theta/p_0}\|g\|_{q'_\theta}^{q'_\theta/q'_0}\]
for $\Re z=0$, and
\[|\<Tf_z,g_z\>|\le\|T\|_{p_1\to q_1}\|f_z\|_{p_1}\|g_z\|_{q'_1}=\|T\|_{p_1\to q_1}\|f\|_{p_\theta}^{p_\theta/p_1}\|g\|_{q'_\theta}^{q'_\theta/q'_1}\]
for $\Re z=1$.
By Hadamard's three line lemma, we have
\[|\<Tf_z,g_z\>|\le\|T\|_{p_0\to q_0}^{1-\theta}\|T\|_{p_1\to q_1}^\theta\|f\|_{p_\theta}\|g\|_{q'_\theta}\]
for $\Re z=\theta$.
Putting $z=\theta$ in the last inequality, we get the desired result.
\end{pf}





\chapter{Lebesgue differentiation theorem}

\section{Hardy-Littlewood maximal function}

Let $T_m$ be a net of linear operators.
It seems to have two possible definitions of maximal functions:
\[T^*f:=\sup_m|T_mf|\]
and
\[T^*f:=\sup_{m,\ \e:|\e(x)|=1}|T_m(\e f)|.\]

\begin{prb}[Hardy-Littlewood maximal function]
The Hardy-Littlewood maximal function is just the maximal function defined with the approximate identity by the box kernel.
\end{prb}

\begin{prb}[Weak type estimate]
\[\|Mf\|_{1,\infty}\le 3^d\|f\|_{L^1(X)}.\]
\begin{parts}
\item Proof by covering lemma.
\end{parts}
\end{prb}
\begin{pf}
(a)
By the inner regularity of $\mu$, there is a compact subset $K$ of $\{|Mf|>\lambda\}$ such that
\[\mu(K)>\mu(\{|Mf|>\lambda\})-\e.\]
For every $x\in K$, since $|Mf(x)|>\lambda$, we can choose an open ball $B_x$ such that
\[\frac1{\mu(B_x)}\int_{B_x}|f|>\lambda\]
if and only if
\[\mu(B_x)<\frac1\lambda\int_{B_x}|f|.\]
With these balls, extract a finite open cover $\{B_i\}_i$ of $K$.
Since the diameter of elements in this cover is clearly bounded, so the Vitali covering lemma can be applied to obtain a disjoint subcollection $\{B_k\}_k$ such that
\[K\subset\bigcup_iBi\subset\bigcup_k3B_k.\]
Therefore,
\[\mu(K)
\le\sum_k3^d\mu(B_k)
\le\frac{3^d}\lambda\sum_k\int_{B_k}|f|
\le\frac{3^d}\lambda\|f\|_1.\]
The disjointness is important in the last inequality which shows the constant does not depend on the number of $B_k$'s.
\end{pf}



\begin{prb}[Radially bounded approximate identity]
If an approximate identity $K_n$ is radially bounded, then its maximal function is dominated by the Hardy-Littlewood maximal function:
\[\sup_n|K_n*f(x)|\lesssim Mf(x)\]
for every $n$ and $x$, hence has a weak type estimate.
\end{prb}


\begin{prb}[Almost everywhere convergence of operators]
Suppose is $T_m$ is a sequence of linear operators such that the maximal function $T^*f$ is dominated by $Mf$.
If $f\in L^1(X)$ and $T_mg\to g$ pointwise for $g\in C(X)$, then $T_mf\to f$ a.e.
\end{prb}
\begin{pf}
Take $\e>0$ and $g\in C(X)$ such that $\|f-g\|_{L^1(X)}<\e$.
Since $T_mg(x)\to g(x)$ pointwise, we have
\begin{align*}
&\mu(\{x:\limsup_m|T_mf(x)-f(x)|>\lambda\})\\
&\qquad\le\mu(\{x:\limsup_m|T_mf(x)-T_mg(x)|>\tfrac\lambda2\})
+\mu(\{x:|g(x)-f(x)|>\tfrac\lambda2\})\\
&\qquad\le\mu(\{x:M(f-g)(x)>\tfrac\lambda2\})+\frac2\lambda\|f-g\|_{L^1(X)}\\
&\qquad\lesssim\frac1\lambda\e
\end{align*}
for every $\lambda>0$.
Limiting $\e\to0$, we get
\[\mu(\{x:\limsup_m|T_mf(x)-f(x)|>\lambda\})=0\]
for every $\lambda>0$, hence the continuity from below implies
\[\mu(\{x:\limsup_m|T_mf(x)-f(x)|>0\})=0.\]
\end{pf}


\begin{defn}
\[f^*(x):=\lim_{r\to0+}\frac1{\mu(B)}\int_B|f(y)-f(x)|\,dy.\]
\end{defn}
\begin{thm}[Lebesgue differentiation]
$f^*=0$ a.e.
\end{thm}
\begin{pf}
Note that $f^*\le Mf+|f|$ implies
\[\|f^*\|_{1,\infty}\le\|Mf\|_{1,\infty}+\|f\|_{1,\infty}\lesssim\|f\|_1.\]
Note that $g^*=0$ for $g\in C_c$.
Approximate using $f^*=(f-g)^*$.
\end{pf}

\section*{Exercises}
\begin{prb}[Doubling measure]

\end{prb}


\end{document}



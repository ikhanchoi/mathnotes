\documentclass{../../../small}
\usepackage{../../../ikhanchoi}
\usepackage{proof}

\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Tm}{Tm}
\DeclareMathOperator{\Fml}{Fml}
\DeclareMathOperator{\Seq}{Seq}
\DeclareMathOperator{\Th}{Th}

\begin{document}
\title{Proof Theory}
\author{Ikhan Choi\\Lectured by Toshiyasu Arai\\University of Tokyo, Spring 2023}
\maketitle
\tableofcontents

\newpage
\section{Day 1: April 10}

In this lecture we only consider classical 1st order logic.

Completeness theorem
\[\text{logically valid}\quad\Leftrightarrow\quad\text{provable}\]
If a statement is provable, then it is true, isn't it?
If a statement can't be proved, then it is not true, is it?
No!

Most references share the common notion of logical validity, but provability slightly differs although they are same eventually.
Provability depends on the choice of axioms and inference rules, and we will choose G. Gentzen's(1934/35).

Informally,
\begin{itemize}
\item a \emph{formula} is a formal expression which represents propositions,
\item the truth of a formula is determined by a \emph{structure} and \emph{satisfaction relation},
\item a \emph{language} can give strucures their shapes.
\end{itemize}
\begin{defn}
A language is a set $\cL$ of symbols.
The set of symbols $\cL=\cF\cup\cP$ are divided into two categories: functions and predicates(also called relations or conditions).
A non-negative integer, called arity, is assigned to each symbol.
A 0-ary function is called a constant.
We will write the set of $n$-ary function symbols as $\cF_n$ and $n$-ary predicate symbols as $\cP_n$.
(Symbols given in a language is somtimes called non-logical symbols, because they depend on the definition of languages.)
\end{defn}

\begin{defn}
Let $\cL$ be a language.
An $\cL$-structure is a pair $\cM=(M,F)$ of a set $M$ and a function $F$ with domain $\cL$ such that $F(p)=p^\cM\subset M^n$, $F(f)=f^\cM:M^n\to M$.
\end{defn}

\begin{defn}[Term]
Let $\cL$ be a language.
A variable is an element of a countable set $\Var$ such that $\Var\cap\cL=\varnothing$.
A term is an element of $\Tm_\cL$, recursively defined such that
\begin{parts}
\item $\Var\subset\Tm_\cL$,
\item If $t_1,\cdots,t_n\in\Tm_\cL$ and $f\in\cF_n$, then $f(t_1,\cdots,t_n)\in\Tm_\cL$.
\end{parts}
\end{defn}


Let $\cM$ be an $\cL$-structure and let $\cL(\cM):=\cL\cup\{c_\alpha:\alpha\in M\}$.
$\cM$ is a $\cL(\cM)$-structure by letting $c_\alpha^\cM:=\alpha$.
A closed term is a term which does not contain any variables, so that it is recursively constructed from constants by functions.
Let $\cM$ be an $\cL$-structure and $t$ be a closed $\cL(\cM)$-term.
If $t\equiv f(t_1,\cdots,t_n)$ (completely equal as sequences of symbols), then $t^\cM$ is recursively defined by $t^\cM:=f^\cM(t_1^\cM,\cdots,t_n^\cM)\in M$.


\begin{defn}[Formula]
Let $\cL$ be a language.
A formula is an element of $\Fml_\cL$, recursively defined such that
\begin{parts}
\item if $t_1,\cdots,t_n\in\Tm_\cL$ and $p\in\cP_n$, then $p(t_1,\cdots,t_n)\in\Fml_\cL$,
\item if $A,B\in\Fml_\cL$, then $\neg A,\ A\vee B,\ A\wedge B,\ A\to B\in\Fml_\cL$,
\item if $A\in\Fml_\cL$ and $x\in\Var$, then $\exists x\,A,\ \forall x\,A\in\Fml_\cL$.
\end{parts}
The symbols $\neg,\ \vee,\ \wedge,\ \to$ are called connectives, and the symbols $\exists,\ \forall$ are called quantifiers.
They are called logical symbols, which does not depend on languages. 
\end{defn}

\begin{defn}[Free variables]
For a term $t$, the set $\Var(t)\subset\Var$ is defined as
\begin{parts}
\item if $x\in\Var$, then $\Var(x)=\{x\}$,
\item $\Var(f(t_1,\cdots,t_n))=\bigcup_{i=1}^n\Var(t_i)$.
\end{parts}
For a formula $A$, the set $\Var(A)\subset\Var$ is defined as
\begin{parts}
\item $\Var(p(t_1,\cdots,t_n))=\bigcup_{i=1}^n\Var(t_i)$.
\item if $\circ\in\{\vee,\wedge,\to\}$, then $\Var(A\circ B)=\Var(A)\cup\Var(B)$,
\item if $\circ\in\{\exists,\forall\}$ and $x\in\Var$, then $\Var(\circ x\,A)=\Var(A)\setminus\{x\}$.
\end{parts}
An element of $\Var(A)$ is called a free variable, and a formula $A$ is said to be closed if $\Var(A)=\varnothing$.
\end{defn}

\begin{defn}[Satisfiability relation]
Let $A$ be a closed formula over $\cM$.
We write $\cM\models A$ and say $A$ holds on $\cM$ or $\cM$ satisfies $A$ if
\begin{parts}
\item $\cM\models p(t_1,\cdots,t_n)$ iff $(t_1^\cM,\cdots,t_n^\cM)\in p^\cM$,
\item $\cM\models\neg A$ iff $\cM\not\models A$,
\item $\cM\models A\vee B$ iff $\cM\models A$ or $\cM\models B$ (similarly for $\wedge$ and $\to$),
\item $\cM\models\exists x\,A$ iff there is $\alpha\in M$ such that $\cM\models A[x:=c_\alpha]$, where $A[x:=c_\alpha]$ is the result of replacing the variable $x$ by $c_\alpha$ in $A$ (similarly for $\forall$).
\end{parts}
\end{defn}



\iffalse
First order syntax

variables
	functions
terms
	a relation
literals
	connectives
formulas
	quantifiers
sentences
\fi



\section{Day 2: April 17}

Let $A$ be a formula.
Then, the universal closure is $\forall(A):=\forall x_1\cdot\forall x_n\,A$, where $\{x_1,\cdots,x_n\}=\Var(A)$.

\begin{defn*}
A formula $A$ is called \emph{logically valid} if its universal closure holds on every structure $\cM$ and write $\models A$.
A formula $A$ is called to be \emph{logically equivalent} to another formula $B$ if $\models A\leftrightarrow B$.
\end{defn*}

\begin{defn*}
A \emph{literal} is an atomic formula or its negation.
A \emph{negation normal form}(nnf) of a formula is a formula in which negation symbols are placed as inner as possible.
We may also write
\[nnf::=literals\mid A_0{\wedge\atop\vee}A_1\mid{\exists\atop\forall}x\,A.\]
\end{defn*}

\begin{prop*}
For each formula $A$, there is a logically equivalent nnf.
\end{prop*}

\begin{pf}
We have four logically valid formulas
\begin{align*}
&\models(A\to B)\leftrightarrow(\neg A\vee B),\\
&\models\neg(A{\vee\atop\wedge}B)\leftrightarrow(\neg A{\wedge\atop\vee}\neg B),\\
&\models\neg({\exists\atop\forall}x\,A)\leftrightarrow{\forall\atop\exists}x\,\neg A,\\
&\models\neg\neg A\leftrightarrow A.\qedhere
\end{align*}
\end{pf}

\subsection*{1. Sequent calculus}
\setcounter{section}{1}

Languages are assumed to be countable.
\begin{defn}
A finite set of formulas in nnf is said to be a \emph{sequent}. % 推件
Then, a sequence $\{A_1,\cdots,A_n\}$ intends to be the disjunction $A_1\vee\cdots\vee A_n$.
Greek alphabets $\Gamma,\Delta$ will be used to denote sequents, and comma between sequents actually mean their union, i.e. $\Gamma,\Delta=\Gamma\cup\Delta$, and $\Gamma,\{A\}=\Gamma\cup\{A\}$.
The empty sequent denotes an absurdity.
\end{defn}

\begin{defn}[Sequent calculus]
Our sequent calculus $\G$ is a proof system defined as follows.
We have only one logical axiom for $\G$:
\begin{itemize}
\item $\Gamma,L,\bar{L}$ for arbitrary sequent $\Gamma$ and literal $L$.
\end{itemize}
We have the following inference rules for $\G$:
\begin{itemize}
\item \qquad$\infer[^{(\vee)}]{\Gamma}{\Gamma,A_0,A_1}$\qquad if $(A_0\vee A_1)\in\Gamma$.
\item \qquad$\infer[^{(\wedge)}]{\Gamma}{\Gamma,A_0 & \Gamma,A_1}$\qquad if $(A_0\wedge A_1)\in\Gamma$.
\item \qquad$\infer[^{(\exists)}]{\Gamma}{\Gamma,A(t)}$\qquad if $(\exists x\,A(x))\in\Gamma$, where $A(t):\equiv A[x:=t]=A[t/x]$.
\item \qquad$\infer[^{(\forall)}]{\Gamma}{\Gamma,A(a)}$\qquad if $(\forall x\,A(x))\in\Gamma$, provided that the variable $a$ does not occur in any formulas in $\Gamma$. Such a variable $a$ is called \emph{eigenvariable} of the rule $(\forall)$.
\end{itemize}
We also consider another inference rule, which is not for $\G$:
\begin{itemize}
\item \qquad$\infer[^{(cut)}]{\Gamma}{\Gamma,\neg C & C,\Gamma}$\qquad
\end{itemize}
In a proof system, derivable seuqents are defined recursively as follows: all logical axioms are derivable, for each inference rule the lower sequent is derivable if all sequents in the upper sequent is derivable.
\end{defn}

\begin{thm}[Soundness of $\G+(\mathrm{cut})$]
If $\G+(\mathrm{cut})\vdash\Gamma$, then $\models\Gamma$.
\end{thm}
\begin{pf}
We can check from definition.
\end{pf}

\begin{thm}[Completeness of $\G$]
If $\models\Gamma$, then $\G\vdash\Gamma$.
\end{thm}

\begin{cor}[Cut elimination theorem]
If $\G+(\mathrm{cut})\vdash\Gamma$, then $\G\vdash\Gamma$.
\end{cor}
\begin{pf}
Clear from the soundness of $\G+(\mathrm{cut})$ and the completeness of $\G$.
\end{pf}

\begin{cor}[Weakening]
If $\G\vdash\Gamma$, then $\G\vdash\Gamma,\Delta$.
\end{cor}
\begin{pf}
In the proof tree, add $\Delta$ in every nodes(sequents).
Then, every inference rule is preserved (for ($\forall$)-rule, we can obtain same result by changing eigenvariables into another eigenvariables, and it is done because the eigenvariables are finite and the set of variables is countebly infinite).
\end{pf}
\begin{prop}
$\G\vdash\Gamma,\neg A,A$. (Note that $A$ is not a literal in general, it is not a logical axiom)
\end{prop}
\begin{pf}
It is done by induction on the number of $\vee,\wedge,\exists,\forall$ occurring in $A$.
For $\vee$,
\[\infer[^{(\wedge)}]{\Gamma,\neg(A_0\vee A_1),A_0\vee A_1}{\infer[^{(\vee)}]{\Gamma,\neg A_0,A_0\vee A_1}{\Gamma,\neg A_0,A_0} & \infer[^{(\vee)}]{\Gamma,\neg A_1, A_0\vee A_1}{\Gamma,\neg A_1,A_1}}.\]
For $\exists$,
\[\infer[^{(\forall)}]{\Gamma,\neg(\exists x\,A(x)),\exists x\,A(x)}{\infer[^{(\exists)}]{\Gamma,\neg A(a),\exists x\,A(x)}{\Gamma,\neg A(a),A(a)}},\]
where $a$ is an eigenvariable.
(Here, we cannot change the order of $(\forall)$-rule and $(\exists)$-rule because the eigenvariable can occur in inferences)
\end{pf}



\newpage
\setcounter{section}{2}
\section{Day 3: April 24}
\subsubsection*{Completeness of propositional logic}
\begin{itemize}
\item atoms(propositional variables): $p_0,\ p_1,\ p_2,\ \cdots$.
\item literals: $p_0,\ \bar{p_0},\ p_1,\ \bar{p_1},\ \cdots$
\item formulas: $A::=p\mid\bar p\mid A\vee A\mid A\wedge A$
\item truth assignment: $\nu:\{p_0,p_1,\cdots\}\to\{0,1\}$
\end{itemize}

For connectives, truth assignment must satisfy
\[\nu(\bar p)=1-\nu(p),\quad\nu(A_0\vee A_1)=\max\{\nu(A_0),\nu(A_1)\},\quad\nu(A_0\wedge A_1)=\min\{\nu(A_0),\nu(A_1)\}.\]
We say a formula $A$ is tautoloy if $\nu(A)=1$ for all truth assignment $\nu$, and satisfiable if $\nu(A)=1$ for some truth assignment $\nu$.

\begin{defn*}[$\G_0$; propositional fragment of $\G$]
axioms
\begin{itemize}
\item $\Gamma,p,\bar p$
\end{itemize}
rules
\begin{itemize}
\item $\infer[(\vee)]{\Gamma}{\Gamma,A_0,A_1}$ if $(A_0\vee A_1)\in\Gamma$
\item $\infer[(\wedge)]{\Gamma}{\Gamma,A_0 & \Gamma,A_1}$ if $(A_0\wedge A_1)\in\Gamma$
\end{itemize}
\end{defn*}

Soundness of $\G_0$ means that $\G_0\vdash\Gamma$ implies that $\bigvee\Gamma$ is a tautology, and completeness means the converse.

\begin{pf}[Proof of completeness]
$T\subset{}^{<\omega}2=\bigcup_{n=0}^\infty 2^n$ is a tree iff $T\ne\varnothing$, $\sigma*\tau\in T$ implies $\sigma\in T$($*:2^n\times 2^{m-n}\to 2^m$ is the concatentation $(a_0,\cdots,a_{n-1})*(a_n,\cdots,a_{m-1})=(a_0,\cdots,a_{m-1})$).
Each element means a node, and the length of node means the depth.

Define the following recursively on sequences($=$nodes)  $\sigma\in{}^{<\omega}2$ and a tree $T$($=\varnothing$initially):
\begin{itemize}
\item $\mathrm{Seq}(\sigma)=\mathrm{Seq}_0(\sigma)\cup\mathrm{Seq}_1(\sigma)=$ sequents at $\sigma$.
\item $\mathrm{Ord}(\sigma)=$ total order on $\mathrm{Seq}_0(\sigma)$
\item for the empty sequence $\varnothing$($=$root node),
\[\mathrm{Seq}_0(\varnothing):=NL(\Gamma)=\text{non-literals in $\Gamma$},\quad\mathrm{Seq}_1(\varnothing):=L(\Gamma)=\text{literals in $\Gamma$}.\]
\item if $\mathrm{Seq}(\sigma)$ is an axiom, that is, there is an atom $p$ such that $\{p,\bar p\}\subset\mathrm{Seq}(\sigma)$, then $\sigma$ is a leaf of $T$.
\item if $\mathrm{Seq}_0(\sigma)=\varnothing$, then $\sigma$ is a leaf of $T$.
\item Suppose $B$ is the leftmost member of $\mathrm{Seq}_0(\sigma)$; we have two cases.\\
The first case is $B\equiv A_0\vee A_1$.
We put $\sigma*(0)$ into $T$ and write
\[\mathrm{Seq}_0(\sigma)=A_0\vee A_1,\Gamma_0,\quad\mathrm{Seq}_1(\sigma)=\Gamma_1.\]
Then,
\[\Seq_0(\sigma*(0)):=\Gamma_0,NL(A_0,A_1),\quad\Seq_1(\sigma*(0)):=\Gamma_1,A_0\vee A_1,L(A_0,A_1).\]
For the second case $B\equiv A_0\wedge A_1$, we put $\sigma*(0)$ and $\sigma*(1)$ into $T$ and write
\[\mathrm{Seq}_0(\sigma)=A_0\wedge A_1,\Gamma_0,\quad\mathrm{Seq}_1(\sigma)=\Gamma_1.\]
Then,
\[\Seq_0(\sigma*(0)):=\Gamma_0,NL(A_0),\quad\Seq_1(\sigma*(0)):=\Gamma_1,A_0\wedge A_1,L(A_0),\]
\[\Seq_0(\sigma*(1)):=\Gamma_0,NL(A_1),\quad\Seq_1(\sigma*(1)):=\Gamma_1,A_0\wedge A_1,L(A_1).\]
\end{itemize}
The decomposition $\mathrm{Seq}(\sigma)=\mathrm{Seq}_0(\sigma)\cup\mathrm{Seq}_1(\sigma)$ is introduced in order to avoid
\[\infer{A_0\vee A_1,\Gamma}{\infer{A_0,A_1,A_0\vee A_1,\Gamma}{\infer{A_0,A_1,A_0,A_1,A_0\vee A_1,\Gamma}{\vdots}}}.\]
The set $\mathrm{Seq}_0(\sigma)$ is the set of \emph{unanalyzed sequents}, which contains non-literals only.
We will write the decomposition as $\mathrm{Seq}(\sigma)=\mathrm{Seq}_0(\sigma);\mathrm{Seq}_1(\sigma)$.
The tree $T$ is finite because if we define $lc(A)$ as the number of occurences of $\vee,\wedge$ in $A$ and $lc(\sigma)=\sum_{A\in\Seq_0(\sigma)} lc(A)$, then we can check $lc(\sigma)>lc(\sigma*(i))$ for $i\in\{0,1\}$.

Now we suppose $\G_0\not\vdash\Gamma$ so that there is a leaf $\sigma\in T$ such that $\Seq(\sigma)$ is not an axiom.
For every atom $p$, we have $\{p,\bar p\}\not\subset\Seq_1(\sigma)$.
Define any truth assignment $\nu$ such that
\[\nu(l)=0\text{ for literals }l\in\Seq_1(\sigma).\]

Define for the leaf $\sigma$ a set
\[S:=\bigcup_{\exists\rho,\tau*\rho=\sigma}\Seq(\tau).\]
In other words, $A\in S$ iff $A$ occurs in the path from $\sigma$ to the root.
Let $B\in S$.
We claim $\nu(B)=0$.
Use the induction on $lc(B)$.
If $B$ is a literal, then $\nu(B)=0$ by definition of $\nu$.
If $B\equiv A_0\vee A_1$, then we can show $\{A_0,A_1\}\subset S$, so $\nu(B)=0$ by the induction hypothesis.
If $B\equiv A_0\wedge A_1$, then we can show $\{A_0,A_1\}\cap S\ne\varnothing$, so $\nu(B)=0$ by the induction hypothesis.
From $\Gamma\subset S$, we have $\nu(A)=0$ for all $A\in\Gamma$, so $\nu(\bigvee\Gamma)=0$, i.e. $\bigvee\Gamma$ is not a tautology.
\end{pf}



\newpage
\section{Day 4: May 1}
\subsection*{Completeness of first order logic}

Assuming $\G\not\vdash\Gamma$, we have to construct a structure $\cM$ such that $\cM\not\models\bigvee\Gamma$ (i.e.$\cM\not\models\forall\bigvee\Gamma$, the universal closure).
For this, we have to make a set and construct interpretations of each symbol of the given language, the set of non-logical symbols.

(1)
For universal formula,
\[\infer{\forall x\,A(x),\cdots;}{\cdots, NL(A(a));\cdots,\forall x\,A(x),L(A(a))}.\]

(2)
Suppose an existential formula $\exists x\,A(x)$ occurs in a path $P$.
Note that $\cM\not\models \exists x\,A(x)$ implies $\cM\not\models A(t)$ for any term $t$.
For each term $t$, $A(t)$ should occur in the path $P$.
Define $\Tm(\sigma;\exists x\,B(x))$ such that $t\in\Tm(\sigma;\exists x\,B(x))$ if and only if an inference
\[\infer{\exists x\,B(x),\cdots;\cdots}{\cdots,B(t);\cdots}\]
occurs in the path from the root $\varnothing$ to the node $\sigma$.

Now we are going to construct a tree $T$ recursively from the root as follows:
\begin{enumerate}[\text{Case} 1:]
\item
$\Seq_1(\sigma)\supset\{L,\bar{L}\}$ for some literal $L$, then we stop to prolong the tree.
In what follows, assume no literals satisfy $\Seq_1(\sigma)\supset\{L,\bar{L}\}$.

\item
$\Seq_0(\sigma)=\varnothing$, then we repeat as
\[\infer{\varnothing;\Seq_1(\sigma)}{\varnothing;\Seq_1(\sigma)}.\]
Now let $A$ be the leftmost formula in $\Seq_0(\sigma)$.

\item
$A\equiv A_0\vee A_1$.
As in the last lecture.

\item
$A\equiv A_0\wedge A_1$.
As in the last lecture.

\item
$A\equiv\forall x\,B(x)$.
Then, we extend the tree as follows:
\[\infer{\forall x\,B(x),\Gamma_0;\Gamma_1}{\Gamma_0,NL(B(a));\Gamma_1,\forall x\,B(x),L(B(a))}.\]

\item
$A\equiv\exists x\,B(x)$.
Let $t\equiv t_n$ be the first one in the enumeration $\Tm=\{t_0,t_1,\cdots\}$ such that $t_n\notin\Tm(\sigma;\exists x\,B(x))$.
Then, we can extend the tree as
\[\infer{\exists x\,B(x),\Gamma_0;\Gamma_1}{\Gamma_0,NL(B(t)),\exists x\,B(x);\Gamma_1,L(B(t))}.\]
Note that we have put $\exists x\,B(x)$ into $\Seq_0$, not $\Seq_1$.
\end{enumerate}

Suppose $\G\not\vdash\Gamma$.
If $T$ is finite, then every leaf is an axiom so that the tree is indeed a derivation of $\Gamma$, $T$ is infinite.
By K\"onig's infinity lemma, there exists an infinite path $P$ through the constructed binary tree $T$.

\begin{pf}[Proof of K\"onig's lemma]
The lemma holds for general connected locally finite infinite graphs, but we assume the graph is tree.
Choose $\sigma_n$ recursively as follows: suppose $\sigma_n$ satisfies that $\{\tau:\sigma*\tau\in T\}$ is infinite.
By the local finiteness, there is $i$ such that $\{\tau:\sigma*(i)*\tau\in T\}$ is infinite.
Let $\sigma_{n+1}:=\sigma_n*(i)$.
Then, $\sigma_n$ defines an infinite path in $T$.
\end{pf}

Now we construct the \emph{Herbrand structure} $\cM=\<M;f^\cM,\cdots,R^\cM,\cdots\>$ as:
\begin{itemize}
\item $M:=\Tm(\cL)$,
\item $f^\cM(t_1,\cdots,t_n):=f(t_1,\cdots,t_n)$,
\item $R^\cM(t_1,\cdots,t_n)$ is true if and only if
\[R(t_1,\cdots,t_n)\notin\Seq(P):=\bigcup_{\sigma\in P}\Seq(\sigma)\]
\end{itemize}
Then, $\cM\models\bar{L}$ if and only if $L\in\Seq(P)$ for literals $L$.
\begin{clm*}
If $A\in\Seq(P)$, then $\cM\not\models A$.
\end{clm*}
\begin{pf}
Define the literal complexity $lc(A)$ by the number of occurrences of logical symbols in $A$, and use induction on $lc(A)$.

For the Case 5: $A\equiv\forall x\,B(x)$.
We have $B(a)\in\Seq(P)$ so that $\cM\not\models B(a)$ by the induction hypothesis.

For the Case 6: $A\equiv\exists x\,B(x)$.
We have $\exists x\,B(x)\in\Seq(P)$, and it implies $\{B(t):t\in\Tm\}\subset\Seq(P)$.
By the induction hypothesis, $\cM\not\models B(t)$ for all $t\in\Tm$, hence $\cM\not\models\exists xB(x)$.
\end{pf}

% 계산이론이 필요한 경우 관계의 해석을 원자식이 아니라 임의의 식에 대해 정의하고 그것이 타르스키의 진리론(컨벤션)을 만족함을 보일 수 있다.


\newpage
\section{Day 5: May 8}

We have shown completeness theorems for logic(in a proof system): propositional logic and first order logic.
From now we discuss the completeness theorem for theories.

\begin{defn*}
Let $\cL$ be a language, $\cM$ a $\cL$-structure, $A$ a $\cL$-formula, $\Gamma$ a $\cL$-sequent.
A \emph{theory}(or axiomatic system) $T$ over $\cL$ is a set of closed $\cL$-formulas(= $\cL$-sentences).
We write $\cM\models T$ and say $\cM$ is a model of $T$ if $\cM\models A$ for all $A\in T$.
We write $T\models A$ and say $A$ is a logical consequence of $T$ if for every $\cL$-structure $\cM$ such that $\cM\models T$ we have $\cM\models A$.
We write $T\vdash\Gamma$ for a sequent $\Gamma$ and say $\Gamma$ is provable form $T$ if there exists a derivation of $\Gamma$ in the proof system $\G$ together with an additional inference rule
\[\infer[^{(T)}]{\Delta}{\neg A,\Delta}\]
for $A\in T$.
Note that $\neg A\vee B\equiv A\to B$.
\end{defn*}
\begin{rmk*}
$T\vdash\Gamma$ iff there is a finite subset $\{A_1,\cdots,A_n\}\subset_{\mathrm{fin}}T$ such that $\G\vdash\{\neg A_1,\cdots,\neg A_n\},\Gamma$.
Therefore, assuming the following theorem(will be proved in the next lecture), we can prove the completeness theorem ($T\models A$ implies $T\vdash A$) by a little modification of the completeness of $\G$:
\end{rmk*}
\begin{thm*}[Compactness]
$T\models A$ if and only if $T_0\models A$ for some $T_0\subset_{\mathrm{fin}}T$.
\end{thm*}


Modification of the completeness proof we did in the last week for a theory $T$.
Suppose $\cL$ is countable and $T\not\vdash\Gamma$.
We want to find a model $\cM$ of $T$ such that $\cM\not\models \bigvee\Gamma$.
Modify the proof search procedure in $\G$ as follows:
for a node $\sigma$ with length $n$, if $n$ is even then analyze the leftmost formula to the semifolon as we did in the last week, if $n=2m+1$ is odd then after enumeration $T=\{A_0,A_1,\cdots\}$ we construct
\[\infer[^{(T)}]{\Gamma_0;\Gamma_1}{\Gamma_0,NL(\neg A_m);L(\neg A_m),\Gamma_1}.\]
The proof tree constructed as above must be infinite since $T\not\vdash\Gamma$.
Pick an infinite path $P$ from the root in that tree using the K\"onig argument.
If $\Seq(P):=\bigcup_{\sigma\subset P}(\Seq_0(\sigma)\cup\Seq_1(\sigma))$, then $\{\bar L,L\}\not\subset P$, $\exists x\,B(x)\in\Seq(P)$ implies $\{B(t_n)\}_n\subset\Seq(P)$, and $\{\neg A\}_{A\in T}\subset\Seq(P)$.
Let $\cM$ be the structure obtained from the path $P$ such that $A\in\Seq(P)$ implies $\cM\not\models A$.
Then, $\cM\models T$ and $\cM\not\models A$

\subsubsection*{Preparation 1 for the compactness theorem}

\begin{defn*}[Equality axiom]
$\mathrm{Eq}$ denotes the set of closed formulas
\begin{gather*}
\forall x(x=x),\quad\forall x,y(x=y\to y=x),\quad\forall x,y,z(x=y\to y=z\to x=z),\\
\forall x_1,\cdots,x_n,y_1,\cdots y_n((x_1=y_1\wedge\cdots\wedge x_n=y_n)\to f(x_1,\cdots,x_n)=f(y_1,\cdots,y_n)),\\
\forall x_1,\cdots,x_n,y_1,\cdots y_n((x_1=y_1\wedge\cdots\wedge x_n=y_n)\to R(x_1,\cdots,x_n)=R(y_1,\cdots,y_n)).
\end{gather*}
\end{defn*}


\begin{defn*}[Usual definition of models]
Suppose $=\in\cP\subset\cL$.
A structure is $\cM=\<M\mid f^\cM,\cdots,R^\cM,\cdots,=^\cM\>$ such that $f^\cM$ and $R^\cM$ are interpretations we did, and $=^\cM$ satisfies the following:
$\cM\models c_\alpha=c_\beta$ iff $\alpha=^\cM\beta$ iff $\alpha=\beta$ for $\alpha,\beta\in M$.
\end{defn*}

If a structure $\cM$ in the sense we have done so far satisfies $\cM\models\mathrm{Eq}$, then the above ``real equality'' can be realized by the ``quotient'' of $\cM$.

\subsubsection*{Preparation 2 for the compactness theorem}

\begin{defn*}
Let $I\ne\varnothing$.
A filter $D$ over $I$ is a set $D\subset\cP(I)$ such that
\begin{enumerate}[(i)]
\item $\varnothing\notin D$, $I\in D$,
\item $x\in D$ and $x\subset y\subset I$ imply $y\in D$,
\item $x,y\in D$ implies $x\cap y\in D$.
\end{enumerate}
An ultrafilter is a filter $D$ such that for every $x\in I$ we have either $x\in D$ or $x^c\in D$.
\end{defn*}

\begin{defn*}
We say a set $S\subset\cP(I)$ satisfies the finite intersection property if for any $S_0\subset_{\mathrm{fin}}S$ we have $\bigcap S_0\ne\varnothing$.
If $S\subset\cP(I)$ satisfies the finite intersection property, then the filter $D$ generated by $S$ is explicitly given by
\[D=\{y\in I:\exists S_0\subset_{\mathrm{fin}}S\text{ s.t.~}\bigcap S_0\subset I\}.\]
\end{defn*}

\begin{lem*}
A filter is a ultrafilter if and only if it is maximal.
\end{lem*}


\newpage
\section{Day 6: May 15}

\begin{thm*}
Let $D\subset\cP(I)$ be a filter.
The following statements are equivalent:
\begin{parts}
\item $D$ is an ultrafilter.
\item For $X\in D$, if $X\subset Y\cup Z$, then $\{Y,Z\}\cap D\ne\varnothing$.
\item $D$ is maximal among filters.
\end{parts}
\end{thm*}
\begin{pf}
(a)$\Rightarrow$(b)
If $Y\notin D$ and $Z\notin D$, then since $D$ is an ultrafilter so that $Y^c,Z^c\in D$, so $(Y\cup Z)^c=Y^c\cap Z^c\in D$.
However, $X\cap(Y\cup Z)^c=\varnothing$, contradiction.

(b)$\Rightarrow$(a)
Suppose $D$ is not an ultrafilter, then there is $X$ such that $X\notin D$ and $X^c\notin D$.
Then, $I\subset X\cup X^c$ but $\{X,X^c\}\cap D=\varnothing$.

(a)$\Rightarrow$(c)
Suppose $E$ is a filter such that $D\subset E$.
If $X\in E$ and assume $X^c\in D$, then $X^c\in D\subset E$ implies $\{X,X^c\}\subset E$, which contradicts to the assumption that $E$ is a filter, hence $X\in D$.

(c)$\Rightarrow$(a)
Suppose $X\subset I$ and $X\notin D$.
We want to show $X^c\in D$.
For $Y\in D$, we have $Y\cap X^c\ne\varnothing$.
It means $D\cup\{X^c\}$ satisfies the finite intersection property.
Therefore, there is a filter containing $D\cup\{X^c\}$.
Because $D$ is maximal, $X^c\in D$.
\end{pf}

For $\varnothing\ne X\subset I$, $\<X\>:=\{Y\subset I:X\subset Y$ is called the principal filter generated by $X$, and a filter $D$ is called principal if there is $X\subset I$ such that $D=\<X\>$.
For infinite $I$, the Fr\'echet filter or the cofinite filter is the filter $F:=\{X\subset I:|X^c|<\aleph_0\}$.

\begin{prop*}
Let $I$ be an infinite set.
\begin{parts}
\item A principal filter $\<X\>$ is a ultrafilter if and only if $|X|=1$.
\item An ultrafilter $D$ is not principal if and only if $F\subset D$.
\end{parts}
\end{prop*}

\subsubsection*{Ultraproducts}
Let $\cL$ be a language and $I\ne\varnothing$.
For each $i\in I$, consider a $\cL$-structure $\cM_i$(not necessary to contain equality) which share symbols.
Their product is a structure with the product universe and the same symbol set.

For a filter $D\subset\cP(I)$, the reduced product $\prod_D\cM_i$ of $\cM_i$ by $D$ is defined by
\[|\prod_D\cM_i|=\{f_D:f\in\prod_{i\in I}|cM_i|\}.\]
For $f,g\in\prod_{i\in I}|cM_i|$, we can define an equivalence relation $=_D$ such that $f=_Dg$ means that $f(i)=g(i)$ a.e., i.e. $\{i\in I:f(i)=g(i)\}\in D$.
The trasitivity follows from the defining properties of the filter $D$.

For a relation symbol $R$, we define $\prod_i\cM_i\models R(f_1,\cdots,f_n)$ for $\forall i\ \cM_i\models R(f_1(i),\cdots,f_n(i))$ and $\prod_D\cM_i\models R(f_1,\cdots,f_n)$ for $\cM_i\models R(f_1(i),\cdots,f_n(i))$ a.e.

For a function symbol $F$, we define $\prod_D\cM_i\models F(f_1,\cdots,f_n)=_Dg$ for $\cM_i\models F(f_1(i),\cdots,f_n(i))=g(i)$ a.e.

If the filter $D$ is an ultrafilter, then the reduced product is called an ultraproduct.

\begin{thm*}[\L o\'s, Fundamental theorem of ultraproduct]
Let $\cM_i$ be an $\cL$-structure, $D$ an ultrafilter over $I$, $\f$ an $\cL$-formula, $f_1,\cdots,f_n\in\prod_i|\cM_i|$.
Then, $\prod_D\cM_i\models\f((f_1)_D,\cdots,(f_n)_D)$ if and only if $\cM_i\models\f(f_1(i),\cdots,f_n(i))$ a.e.
\end{thm*}

\begin{pf}
By induction on $l.c.(\f)$, the numebr of logical symbols $\wedge,\neg,\exists$.
The conjunction follows from that $D$ is a filter, the negation follows from that $D$ is a ultrafilter, and the existential quantifier follows from:
Suppose $\prod_D\cM_i\models\exists x_0\ \psi(x_0,(f_1)_D,\cdots)$.
Pick $f_0\in\prod_i|\cM_i|$ such that $\prod_D\cM_i\models\psi((f_0)_D,(f_1)_D,\cdots)$.
By the induction hypothesis,
\[\{i\in I:\cM_i\models\psi((f_0)_D,(f_1)_D,\cdots)\}\in D.\]
Since
\[\{i\in I:\cM_i\models\psi((f_0)_D,(f_1)_D,\cdots)\}\subset\{i\in I:\cM_i\models\exists x_0\ \psi(x_0,(f_1)_D,\cdots)\}=:J,\]
$J\in D$.
Pick $f_0\in\prod_i|\cM_i|$ such that $\cM_i\models\psi(f_0(i),f_1(i),\cdots)$ for all $i\in J$.
Then, $\cM_i\models\psi(f_0(i),f_1(i),\cdots)$ a.e.~implies $\prod_D\cM_i\models\psi((f_0)_D,(f_1)_D,\cdots)$, hence $\prod_D\cM_i\models\exists x_0\ \psi(x_0,(f_1)_D,\cdots)$.
\end{pf}

\begin{cor*}
For a closed formula $\f$, $\prod_D\cM_i\models\f$ if and only if $\{i\in I|\cM_i\models\f\}\in D$.
In particular, if $\cM_i\models T$ for every $i\in I$, then $\prod_D\cM_i\models T$.
\end{cor*}


\begin{thm*}[Compactness theorem]
Let $\cL$ be a language and $T$ an $\cL$-theory.
If $T$ is finitely satisfiable, then $T$ is satisfiable.
\end{thm*}
\begin{pf}
Suppose $T$ is finitely satisfiable and let $I=\{T_0\subset_{\mathrm{fin}}T\}$.
Then, for each $T_0\subset_{\mathrm{fin}}T$ there is $i\in I$ such that $\cM_i\models T_0$ for some $\cM_i$.
Define
\[S:=\{\{i\in I:\cM_i\models T_0\}:T_0\subset_{\mathrm{fin}}T\}\subset\cP(I).\]
The set $S$ satisfies the finite intersection property.
Using Zorn's lemma to take an ultrafilter $D$ containing $S$.
Then, $\prod_D\cM_i\models T$ since for $\f\in T$ we have $\{i\in I:\cM_i\models\f\}\in D$ by the \L o\'s fundamental theorem.
\end{pf}


\newpage
\section{Day 7: June 5}

\subsection*{Some applications of compactness theorem}

Let $\cL\subset\cL'$.
Let $\cM$ and $\cM'$ be $\cL$ and $\cL'$- structures.
We call $\cM'$ an \emph{expansion} of $\cM$ and $\cM$ a \emph{reduct} of $\cM'$ if $\cM'=\<M;f^\cM,\cdots,R^\cM,\cdots,g^{\cM'},\cdots,P^{\cM'},\cdots\>$ for $\cM=\<M;f^\cM,\cdots,R^\cM,\cdots\>$ and $g,P\in L'\setminus L$.
Then, for $\f\in\cL(\cM)=\cL\cup\{c_\alpha:\alpha\in M\}$ we have $\cM\models\f$ if and only if $\cM'\models\f$.

Let $\cM$ and $\cN$ be $\cL$-structures.
We say $\cM$ is a \emph{submodel} of $\cN$ or $\cN$ is an \emph{extension} of $\cM$ and write $\cM\subset\cN$, if (1) $M\subset N$, (2) $R^\cM=\cN\cap M_k$ for $k$-ary relations $R\in\cL$, and (3) $f^\cM=f^\cN|_{\cM^k}$ for $k$-ary functions $f\in\cL$.
Don't be confused about expansions and extensions.

\begin{defn*}
An \emph{existential} and \emph{universal} formula is a formula without universal and existential quantifiers, respectively.
\end{defn*}
\begin{prop*}
Let $\cM\subset\cN$.
If $\f\in\cL(\cM)$ is existential, then $\cM\models T$ implies $\cN\models T$.
If $\f\in\cL(\cM)$ is universal, then $\cN\models T$ implies $\cM\models T$.
\end{prop*}
\begin{defn*}
Let $\cM$ and $\cN$ be $\cL$-structures.
We say $\cM$ is a \emph{elementary submodel} of $\cN$ or $\cN$ is an \emph{elementary extension} of $\cM$ and write $\cM\prec\cN$, if $\cM\subset\cN$ and for every $\f\in\cL(\cM)$ we have $\cM\models\f$ if and only if $\cN\models\f$.
\end{defn*}
\begin{ex*}
Let $\R=\<\R:0,1,+,\cdot,<,f,\cdots,R,\cdots\>$.
There exists an elementary extension $^*\R$ of $\R$ such that $^*\R$ is non-Archimedean.
Recall that a field is non-Archimedean if for every $x$ there is a natural number $n$ such that $x\le n\cdot1$, which is equivalent to the existence of $c$ with $0<c<n^{-1}$.
\end{ex*}
\begin{pf}
Let $\cL'=\cL\cup\{c\}$.
Let $T:=\{\f\in\cL(\R):\R\models\f\}\cup\{0<c<n^{-1}:n=1,2,\cdots\}$ be an $\cL'$-theory.% \mathrm{Diag}_{el}(\R)=\{\f\in\cL(\R):\R\models\f\}
If there is a model $\cM$ of $T$, and if we define $^*\R$ to be the reduct of $\cM$ to $\cL$, then we are done.

For $T_0\subset_{\mathrm{fin}}T$, since $T_0$ contains only finite number of formulas of the form $0<c<n^{-1}$, which is clearly satisfiable by the standard $\R$ with interpretation $c^\R=k^{-1}$ for sufficiently large $k$.
By the compactness theorem, the whole $T$ is satisfiable.
\end{pf}
\begin{ex*}
If an $\cL$-theory $T$ has an arbitrary large finite model, i.e.~$\forall n$ $\exists\cM\models$ such that $n\le\|\cM\|(=|M|)<\infty$, then $T$ has an inifinite model.
\end{ex*}
\begin{pf}[Proof 1]
Define an $\cL$-theory
\[T_1:=T\cup\{\exists x_1\cdots\exists x_n\,\bigwedge_{1\le i<j\le n}(x_i\ne x_j):n=1,2,\cdots\},\]
and take $T_0\subset_{\mathrm{fin}}T_1$.
Then, $T_0$ is satisfiable by the assumption, so $T_1$ also has a model, which must be infinite.
\end{pf}
\begin{pf}[Proof 2]
Let $\cL_2:=\cL\cup\{c_0,c_1,\cdots\}$.
Define an $\cL_2$-theory
\[T_2:=T\cup\{c_i\ne c_j:i\ne j\}.\]
By the assumption, an $\cL_2$-theory $T\cup\{c_i\ne c_j:i\ne j,\max{i,j}\le n\}$ is satisfiable, the compactness theorem implies $T_2$ is satisfiable.
Take a reduct.

IN PARTICULAR, we can take an arbitrarily large model of $T$ by letting $\cL_2:=\cL\cup\{c_\alpha:\alpha\in I\}$ with $|I|=\kappa$ for any cardinal $\kappa$.
\end{pf}

\begin{thm*}[Upward L\"owenheim-Skolem-Tarski theorem]
Let $T$ be an $\cL$-theory.
Suppose for every $n\in\N$ there is a model $\cM$ of $T$ with $\|\cM\|\ge n$.
Then, there is a model $\cM$ of $T$ with $\|\cM\|=\kappa$ for every $\kappa\ge|\cL|+\aleph_0\}$.
\end{thm*}
\begin{thm*}[Downward L\"owenheim-Skolem-Tarski theorem]
Let $T$ be an $\cL$-theory.
Let $\cM$ be an infinite model of $T$.
Then, for every $X\subset M$, there is an elementary submodel $\cH(X)$ of $\cM$ such that $X\subset|\cH(X)|$ and $|\cH(X)|\le|X|+|\cL|+\aleph_0$.
The model $\cH(X)$ is called the Skolem hull of $X$ in $\cM$.
\end{thm*}

\begin{ex*}[Skolem's paradox]
Downward L\"owenheim-Skolem theorem implies that $ZF$ has a countably infinite model by taking $X=\varnothing$.
Even though the existence of the power set of $\N$ is provable in $ZF$, it is not a contradiction.
\end{ex*}

\begin{pf}[Proof of the upward LST]
Pick a model $\cM$ of $T$ such that $\|\cM\|\ge\kappa$.
Let $X\subset M$ with $|X|=\kappa$.
By the downward L\"owenheim-Skolem, there is $\cH(X)\prec\cM$ such that $|\cH(X)|\le\kappa+|\cL|+\aleph_0=\kappa$.
Therefore, $\kappa\le|X|\le|\cH(X)|$ implies $|\cH(X)|=\kappa$.
\end{pf}

\newpage
\section{Day 8: June 12}

\begin{thm*}[Downward L\"owenheim-Skolem-Tarski theorem]
Let $T$ be an $\cL$-theory.
Let $\cM$ be an infinite model of $T$.
Then, for every $X\subset M$, there is an elementary submodel $\cH(X)$ of $\cM$ such that $X\subset|\cH(X)|$ and $|\cH(X)|\le|X|+|\cL|+\aleph_0$.
The model $\cH(X)$ is called the Skolem hull of $X$ in $\cM$.
\end{thm*}
\begin{pf}
Let $\cL_0:=\cL$ and $\cL_{i+1}:=\cL_i\cup\cF_i$, where $\cF_i$ is constructed as follows:
for each quantifier-free formula $\theta[\bar x;\bar y]$ in $\cL_i$, where $\bar x=(x_1,\cdots,x_n)$ and $\bar y=(y_1,\cdots,y_m)$, we introduce new $n$-ary function symbols $\{f_1,\cdots,f_m\}=\cF_i\setminus\cL_i$.
Define $\cL_{sk}:=\bigcup_i\cL_i$ and $\cF_{sk}:=\bigcup_i\cF_i$.
Then, $|\cF_i|\le|\cL|+\aleph_0$ implies $|\cF_{sk}|\le(|\cL|+\aleph_0)\cdot\aleph_0=|\cL|+\aleph_0$.
The elements of $\cF_{sk}$ are called the \emph{Skolem functions}.

We want to construct $T_{sk}$ a theory over $\cL_{sk}$ such that
\begin{parts}
\item each $\f\in T_{sk}$ is a universal formula in $\cL_{sk}$,
\item each $\cL$-structure $\cM$ can be expanded to an $\cL_{sk}$-structure $\cM_{sk}$ such that $\cM_{sk}\models T_{sk}$,
\item each $\cL$-formula $\f$ is equivalent to a universal formula $\f_\forall$ and an existential formula $\f_\exists$ in $\cL_{sk}$ over $T_{sk}$, i.e. $T_{sk}\models\f\leftrightarrow\f_\forall\leftrightarrow\f_\exists$.
\end{parts}
Define $T_{sk}$ by the following universal formula is an axiom in $T_{sk}$:
\[\forall\bar x\forall\bar y\ \theta[\bar x,\bar y]\to\theta[\bar x,\bar f(\bar x)],\]
where $\bar f(\bar x):=(f_1(\bar x),\cdots,f_m(\bar x))$.
Then, (a) is clear.


If $\f\equiv\forall x\exists y\,\theta[x,y]$ for a quantifier-free formula $\theta$, then
\[T_{sk}\models\f\leftrightarrow\forall x\,\theta[x,f(x)],\]
where $f$ is any Skolem function.
If $\f\equiv\exists x\forall y\,\theta[x,y]$ for a quantifier-free formula $\theta$, then
\[T_{sk}\models\f\leftrightarrow\exists x\,\theta[x,g(x)],\] where $g$ is any function such that
\[\forall x,y\,(\neg\theta(x,y)\leftrightarrow\neg\theta(x,g(x)))\]
By operations to change any formula $\f$ into a prenex normal form without harming the logical equivalence(we can establish an algorithm for it by extracting the quantifiers outside each negation, conjunction, and disjunction), (c) follows.

Now we prove the theorem.
Expand the given $\cL$-structure $\cM$ to an $\cL_{sk}$-structure $\cM_{sk}\models T_{sk}$.
Define $\cH(X):=\bigcup_nX_n$, where $X_0:=X$ and
\[X_{n+1}:=X_n\cup\{f^\cM(\alpha_1,\cdots,\alpha_m)\in\cM\mid\alpha_1\cdots,\alpha_m\in X_n,\text{ $f$ function symbol in $\cL_{sk}$}\}.\]
Then, since $\cH(X)$ is closed under symbols $\cL_{sk}$, it is a universe of a submodel of $\cM$.
Moreover, since
\[|X_n|\le|X|+|\cF_{sk}|\le|X|+|\cL_{sk}|+\aleph_0\le|X|+(|\cL|+\aleph_0)+\aleph_0=|X|+|\cL|+\aleph_0,\]
we have $|\cH(X)|\le(|X|+|\cL|+\aleph_0)\cdot\aleph_0=|X|+|\cL|+\aleph_0$.

Now we claim $\cH(X)$ is elementary submodel of $\cM$.
Since $\cM_{sk}\models T_{sk}$ and $T_{sk}$ is a universal theory, we have $\cH(X)\models T_{sk}$.
For $\f[\bar x]$ an $\cL$-formula and $\bar\alpha=(\alpha_1,\cdots,\alpha_n)$ with $\alpha_i\in\cH(X)$, we want to show $\cH(X)\models\f[\bar\alpha]$ if and only if $\cM\models\f[\bar\alpha]$.
Pick a universal $\f_\alpha$ and existential $\f_\exists$ such that $T_{sk}\models\f\leftrightarrow\f_\forall\leftrightarrow\f_\exists$.
Then,
\[\begin{tikzcd}
\cH(X)\models\f_\forall[\bar\alpha] \ar[Leftrightarrow]{r}
&\cH(X)\models\f[\bar\alpha] \ar[Leftrightarrow]{r}
&\cH(X)\models\f_\exists[\bar\alpha] \ar[Rightarrow]{d}\\
\cM\models\f_\forall[\bar\alpha] \ar[Leftrightarrow]{r}\ar[Rightarrow]{u}
&\cM\models\f[\bar\alpha] \ar[Leftrightarrow]{r}
&\cM\models\f_\exists[\bar\alpha].
\end{tikzcd}\]
\end{pf}

\begin{defn*}
An $\cL$-theory $T$ is called \emph{complete} if for each closed $\cL$-formula $\f$, $T\models\f$ or $R\models\neg\f$.
\end{defn*}

For an $\cL$-structure $\cM$, we define $\mathrm{Th}(\cM)$ to be the closed $\cL$-formulas $\f$ such that $\cM\models\f$.
Two $\cL$-structures $\cM$ and $\cN$ is called to be \emph{elementary equivalent} if $\Th(\cM)=\Th(\cN)$.
Then, $T$ is complete if and only if there exists a unique model of $T$ up to elementary equivalence.

\begin{defn*}
Let $\kappa$ be an infinite cardinal.
A theory $T$ is called \emph{$\kappa$-categorical} if there exists a unique model $\cM$ of $T$ such that $\|\cM\|=\kappa$ up to isomorphism.
\end{defn*}

\begin{thm*}[Vaught test]
If every model of consistent theory $T$ is infinite, and $T$ is $\kappa$-categorical for a cardinal $\kappa\ge|\cL|+\aleph_0$, then $T$ is complete.
\end{thm*}
\begin{pf}
Suppose $T$ is incomplete and pick an $\cL$-closed formula $\f$ such that $T\not\models\f$ and $T\not\models\neg\f$.
By the upward L\"owenheim-Skolem theorem, there are models $\cM_0$ and $\cM_1$ of $T$ such that $\cM_0\models T\cup\{\neg\f\}$, $\cM_1\models T\cup\{\f\}$, and $\|\cM_0\|=\|\cM_1\|=\kappa$.
Since $T$ is $\kappa$-categorical, $\cM_0$ and $\cM_1$ are isomorphic, which is a contradiction.
\end{pf}

\begin{ex*}
The following theories are complete.
\begin{parts}
\item Algebraic closed field in characteristic $p$ (ACF$_p$),
\item Vector spaces over $\Q$,
\item Non-trivial torsion free divisible abelian groups.
\end{parts}
\end{ex*}


\newpage
\section{Day 9: June 19}

\subsection*{Cut elimination}

The cut is an inference rule
\[\infer{\Gamma}{\Gamma,\neg C&C,\Gamma}\]
where $C$ is called a \emph{cut formula}.
We will consider the \emph{weakening}
\[\infer[^{(\vee)_i}]{\Gamma}{\Gamma,A_i}\]
for $i=0,1$ when $A_0\vee A_1\in\Gamma$, instead of
\[\infer[^{(\vee)}]{\Gamma}{\Gamma,A_0,A_1}.\]
We can describe the inference rules of $\G$ as the set $\{(\vee)_0,(\vee)_1,(\wedge),(\exists),(\forall)\}$.
Then, the only inference rule which has two assumption sequent is the cut.

\begin{defn*}
We define the \emph{rank} $\rk(A)$ of a formula $A$ inductively by $\rk(L)=0$ for literal $L$ and
\[\rk(A_0\vee A_1)=\rk(A_0\wedge A_1):=\max\{\rk(A_0),\rk(A_1)\}+1,\qquad\rk(\exists x\,A)=\rk(\forall x\,A):=\rk(A)+1.\]
We write $\vdash_c^a\Gamma$ if there is a derivation $\cD$ of $\Gamma$ in $\G+(\text{cut})$ such that $\mathrm{depth}(\cS)\le a$ and $\rk(C)<c$ for each cut formula $C$ in $\cD$.
\end{defn*}

If $\Gamma$ is an axiom, i.e.~$\{\bar L,L\}\subset\Gamma$ for some literal $L$, then $\vdash_c^a\Gamma$ holds for every $a$ and $c$.
Then, every inference rule has $\vdash_c^a$ versions: if $b<a$ then $\vdash_c^b\Gamma'$ implies $\vdash_c^a\Gamma$, where $\Gamma'$ is an assumption sequent of each inference rule.

\begin{thm*}[Cut elimination]
If $\vdash_c^a\Gamma$, then $\vdash_0^{2_c(a)}\Gamma$, where $2_c(a):=2^{2_{c-1}(a)}$ and $2_1(a):=2^a$.
\end{thm*}
\begin{pf}
Clear from the following lemma.
\end{pf}
\begin{lem*}
If $\vdash_{c+1}^a\Gamma$, then $\vdash_c^{2^a}\Gamma$.
\end{lem*}
\begin{pf}
We can prove the lemm from the reduction lemma in the below by induction and case study of inferences: axioms, inference by binary connetives and quantifiers(using $b<a$ implies $2^b<2^a$), and inference by cuts.
For the former two cases are easy.

For $b<a$, let $\vdash_{c+1}^b\Gamma,\neg C$ and $\vdash_{c+1}^bC,\Gamma$.
We obtain by the induction hypothesis that $\vdash_c^{2^b}\Gamma,\neg C$ and $\vdash_c^{2^b}C,\Gamma$.
We may assume that $\rk(C)\le c$ and $C$ is one of literals, $C_0\vee C_1$, or $\exists D$.
The reduction lemma implies that $\vdash_c^{2^b+2^b}\Gamma$.
Since $2^b+2^b\le2^a$, we have $\vdash_c^{2^a}\Gamma$.
\end{pf}
\begin{lem*}[Reduction lemma]
Suppose $C$ is a literal, $C_0\vee C_1$, or $\exists x\, D$ such that $\rk(C)\le c$.
If $\vdash_c^a\Gamma,\neg C$ and $\vdash_c^bC,\Delta$, then $\vdash_c^{a+b}\Gamma,\Delta$.
\end{lem*}
We have
\begin{itemize}
\item[(Weaking)] $\vdash_c^a\Gamma$ implies $\vdash_{c+\alpha}^{a+b}\Gamma,\Delta$
\item[(Inversion)] $\vdash_c^a\Gamma,A_0\wedge A_1$ implies $\vdash_c^a\Gamma,A_i$ for $i=0,1$
\item[(Inversion)] $\vdash_c^a\Gamma,\forall x\,D$ implies $\vdash_c^a\Gamma,D(t)$ for a term $t$.
\end{itemize}
\begin{pf}
We use the induction on $b$.
Suppose $\vdash_c^bC,\Delta$.

Case 1: $\{\bar L,L\}\subset\{C\}\cup\Delta$ for a literal $L$.
If $C\ne L$ nor $\bar L$, then $\{\bar L,L\}\subset\Delta$ so that $\Gamma,\Delta$ is an axiom.
If $C=L$, then $\bar L\in\Delta$ so that $\Gamma\cup\{\neg C\}=\Gamma\cup\{\bar L\}\subset\Gamma\cup\Delta$.
Then by weakening $\vdash_c^a\Gamma,\neg C$ implies $\vdash_c^{a+b}\Gamma,\Delta$.

Case 2: $C$ is the major formula of the last inference in $\vdash_c^bC,\Delta$ with $C\equiv\exists x\,D(x)$ or $C\equiv C_0\vee C_1$.
For $b_0<b$,
\[\infer{\vdash_c^b\exists x\,D(x),\Delta}{\vdash_c^{b_0}D(t),\exists D,\Delta}.\]
The induction hypothesis yields $\vdash_c^{a+b_0}\Gamma,\Delta,D(t)$ and $\vdash_c^a\Gamma,\neg D(t)$ by inversion.
A cut with $\rk(D(t))<\rk(\exists x\,D)\le c$ gives $\vdash_c^{a+b}\Gamma,\Delta$.

Case 3: otherwise.
The induction hypothesis yields $\vdash_c^{a+b_0}\Gamma,\Delta,\neg D$ and $\vdash_c^{a+b_0}\Gamma,\Delta,D$.
We obtain $\vdash_c^{a+b}\Gamma,\Delta$.

\end{pf}


\end{document}
























めんどくせ
ちゃんと書くね
ちょいちょい
しゃべっていい？